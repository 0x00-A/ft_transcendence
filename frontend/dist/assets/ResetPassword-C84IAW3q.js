import{l as P,at as b,D as f,am as j,r as p,i as N,B as u,j as s}from"./index-erQsObJq.js";import{B as x,a as h}from"./index-zWRPu04G.js";import{u as C,o as g,R as B,a as E}from"./formSchemas-CD-5kOut.js";import"./iconBase-Dy7Lu4j7.js";const F="_resetPassContainer_1xtwb_1",S="_resetPassBox_1xtwb_9",v="_boxHeader_1xtwb_21",y="_resetPassForm_1xtwb_37",R="_containerFiled_1xtwb_45",I="_inputContainer_1xtwb_53",k="_label_1xtwb_60",A="_input_1xtwb_53",H="_showPassIcon_1xtwb_77",V="_ConfirmButtons_1xtwb_84",D="_fieldError_1xtwb_91",M="_confirmBtn_1xtwb_104",L="_closeBtn_1xtwb_104",a={resetPassContainer:F,resetPassBox:S,boxHeader:v,resetPassForm:y,containerFiled:R,inputContainer:I,label:k,input:A,showPassIcon:H,ConfirmButtons:V,fieldError:D,confirmBtn:M,closeBtn:L},O=()=>{const{register:c,handleSubmit:l,formState:{errors:t},reset:w,watch:i,setError:n,setValue:_}=C({resolver:g(B()),reValidateMode:"onChange",mode:"onChange"}),m=E({mutationFn:async o=>await P.post(b,o),onError:o=>{var d;if(f.isAxiosError(o)){const e=(d=o==null?void 0:o.response)==null?void 0:d.data;e!=null&&e.new_password&&(Array.isArray(e.new_password)?n("new_password",{type:"manual",message:e.new_password.join("-")},{shouldFocus:!0}):n("new_password",{type:"manual",message:e.new_password},{shouldFocus:!0})),e!=null&&e.error&&n("root",{type:"manual",message:e.error})}else n("root",{type:"manual",message:"Something went wrong!"})}});return{register:c,handleSubmit:l,errors:t,mutation:m,reset:w,setValue:_,watch:i,setError:n}},z=()=>{const{token:c}=j(),{register:l,mutation:t,handleSubmit:w,errors:i}=O(),[n,_]=p.useState({new_pass:!1,confirm_pass:!1}),m=N(),o=e=>{_(r=>({...r,[e]:!r[e]}))},d=e=>{c&&(e.token=c),t.mutate(e)};return p.useEffect(()=>{var e,r;t.isSuccess&&(u.success((r=(e=t.data)==null?void 0:e.data)==null?void 0:r.message),m("/auth"))},[t.isSuccess]),p.useEffect(()=>{var e,r;t.isError&&f.isAxiosError(t.error)&&u.error((r=(e=t.error)==null?void 0:e.response)==null?void 0:r.data.error)}),t.isError,s.jsx("div",{className:a.resetPassContainer,children:s.jsxs("div",{className:a.resetPassBox,children:[s.jsxs("div",{className:a.boxHeader,children:[s.jsx("img",{src:"/icons/logo.svg",alt:"",className:a.logo}),s.jsx("h1",{children:"Reset Password"})]}),s.jsxs("form",{action:"",className:a.resetPassForm,onSubmit:w(d),children:[s.jsxs("div",{className:a.containerFiled,children:[s.jsx("label",{htmlFor:"",className:a.label,children:"New Password"}),s.jsxs("div",{className:a.inputContainer,children:[s.jsx("input",{type:n.new_pass?"text":"password",className:a.input,...l("new_password")}),n.new_pass?s.jsx(x,{className:a.showPassIcon,onClick:()=>o("new_pass")}):s.jsx(h,{className:a.showPassIcon,onClick:()=>o("new_pass")})]}),i.new_password&&s.jsx("span",{className:a.fieldError,children:i.new_password.message})]}),s.jsxs("div",{className:a.containerFiled,children:[s.jsx("label",{htmlFor:"",className:a.label,children:"Confirm New Password"}),s.jsxs("div",{className:a.inputContainer,children:[s.jsx("input",{type:n.confirm_pass?"text":"password",className:a.input,...l("confirm_password")}),n.confirm_pass?s.jsx(x,{className:a.showPassIcon,onClick:()=>o("confirm_pass")}):s.jsx(h,{className:a.showPassIcon,onClick:()=>o("confirm_pass")})]}),i.confirm_password&&s.jsx("span",{className:a.fieldError,children:i.confirm_password.message})]}),s.jsxs("div",{className:a.ConfirmButtons,children:[s.jsx("button",{type:"reset",className:a.closeBtn,onClick:()=>m("/auth"),children:"Cancel"}),s.jsx("button",{type:"submit",className:a.confirmBtn,children:"Save"})]})]})]})})};export{z as default};
