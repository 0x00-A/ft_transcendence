import{c as X,r as b,i as L,u as F,j as e,q as w,C as V,X as R,s as re,B as k,w as J,v as K,t as Q,a7 as oe,x as Y,k as Z,a8 as le,a9 as de,h as _e,H as me}from"./index-erQsObJq.js";import{a as ue,b as pe,c as he}from"./index-DfG7zr7K.js";import{G as ee}from"./iconBase-Dy7Lu4j7.js";import{b as je,c as xe}from"./index-DRSugL2N.js";import{F as I}from"./FriendSkeleton-C6d5tkeq.js";import{S as O,a as fe}from"./index-DuZpeteR.js";import{U as P}from"./users-CJsmYFnL.js";import{C as ge}from"./clock-DZvT_-Cl.js";import{U as H}from"./user-plus-CBelkoYu.js";import{E as G}from"./eye-CuDtNkex.js";import{f as A}from"./helpers-BRqGwH6J.js";import{B as se}from"./ban-Dj5hQc8o.js";import{U as te}from"./user-x-CI-A9uXX.js";import{M as ne}from"./message-square-text-BYRNJaux.js";/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=X("CircleDot",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=X("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]),Ne="_CenterContainer_rpo3g_1",be="_container_rpo3g_11",Ce="_content_rpo3g_21",z={CenterContainer:Ne,container:be,content:Ce},ke="_sidebar_1p6n6_1",Fe="_collapsed_1p6n6_17",$e="_sidebarContent_1p6n6_23",Be="_navButton_1p6n6_27",we="_addFriendButton_1p6n6_28",Ie="_active_1p6n6_56",ye="_icon_1p6n6_62",qe="_buttonText_1p6n6_70",Re="_collapseButton_1p6n6_95",Le="_iconContainer_1p6n6_126",Se="_notificationBadge_1p6n6_131",t={sidebar:ke,collapsed:Fe,sidebarContent:$e,navButton:Be,addFriendButton:we,active:Ie,icon:ye,buttonText:qe,collapseButton:Re,iconContainer:Le,notificationBadge:Se};function Te(s){return ee({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"line",attr:{x1:"19",x2:"19",y1:"8",y2:"14"},child:[]},{tag:"line",attr:{x1:"22",x2:"16",y1:"11",y2:"11"},child:[]}]})(s)}function ze(s){return ee({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(s)}const Ue=({setView:s,currentView:m})=>{const[a,j]=b.useState(!0),_=L(),{t:p}=F(),o=()=>{j(!a)},c=x=>{s(x),_(`/friends?view=${x}`)};return e.jsxs("nav",{className:`${t.sidebar} ${a?t.collapsed:""}`,children:[e.jsxs("div",{className:t.sidebarContent,children:[e.jsxs("button",{className:`${t.navButton} ${m==="all"?t.active:""} ${a?t.close:""}`,onClick:()=>c("all"),children:[e.jsx(ze,{className:t.icon}),e.jsx("span",{className:t.buttonText,children:p("sidebarFriends.allFriends")})]}),e.jsxs("button",{className:`${t.navButton} ${m==="online"?t.active:""} ${a?t.close:""}`,onClick:()=>c("online"),children:[e.jsx(ae,{className:t.icon}),e.jsx("span",{className:t.buttonText,children:p("sidebarFriends.onlineFriends")})]}),e.jsxs("button",{className:`${t.navButton} ${m==="requests"?t.active:""} ${a?t.close:""}`,onClick:()=>c("requests"),children:[e.jsx("div",{className:t.iconContainer,children:e.jsx(ue,{className:t.icon})}),e.jsx("span",{className:t.buttonText,children:p("sidebarFriends.friendRequests")})]}),e.jsxs("button",{className:`${t.navButton} ${m==="sent"?t.active:""} ${a?t.close:""}`,onClick:()=>c("sent"),children:[e.jsx(pe,{className:t.icon}),e.jsx("span",{className:t.buttonText,children:p("sidebarFriends.sentRequests")})]}),e.jsxs("button",{className:`${t.navButton} ${m==="blocked"?t.active:""} ${a?t.close:""}`,onClick:()=>c("blocked"),children:[e.jsx(he,{className:t.icon}),e.jsx("span",{className:t.buttonText,children:p("sidebarFriends.blockedList")})]})]}),e.jsxs("button",{className:`${t.addFriendButton} ${m==="add"?t.active:""} ${a?t.close:""}`,onClick:()=>c("add"),children:[e.jsx(Te,{className:t.icon}),e.jsx("span",{className:t.buttonText,children:p("sidebarFriends.addFriend")})]}),e.jsx("button",{className:t.collapseButton,onClick:o,"aria-label":a?"Expand Sidebar":"Collapse Sidebar",children:a?e.jsx(je,{size:15}):e.jsx(xe,{size:15})})]})},Ee="_addFriend_1gwdj_1",De="_results_1gwdj_13",Me="_title_1gwdj_23",Pe="_searchContainer_1gwdj_30",Oe="_searchIcon_1gwdj_37",Ae="_searchInput_1gwdj_46",He="_userCard_1gwdj_67",Ge="_avatar_1gwdj_82",We="_userInfo_1gwdj_89",Xe="_username_1gwdj_93",Ve="_fullName_1gwdj_99",Je="_level_1gwdj_100",Ke="_actions_1gwdj_106",Qe="_viewProfileBtn_1gwdj_111",Ye="_addFriendBtn_1gwdj_112",Ze="_emptyState_1gwdj_133",es="_emptyStateCenter_1gwdj_140",ss="_emptyStateText_1gwdj_148",ts="_notFound_1gwdj_153",ns="_notFoundText_1gwdj_158",as="_suggestedConnections_1gwdj_163",cs="_suggestedConnectionsTitle_1gwdj_171",is="_friendsBtn_1gwdj_178",rs="_pendingBtn_1gwdj_179",os="_acceptBtn_1gwdj_196",ls="_rejectBtn_1gwdj_197",ds="_friendsStatus_1gwdj_218",_s="_cancelBtn_1gwdj_237",i={addFriend:Ee,results:De,title:Me,searchContainer:Pe,searchIcon:Oe,searchInput:Ae,userCard:He,avatar:Ge,userInfo:We,username:Xe,fullName:Ve,level:Je,actions:Ke,viewProfileBtn:Qe,addFriendBtn:Ye,emptyState:Ze,emptyStateCenter:es,emptyStateText:ss,notFound:ts,notFoundText:ns,suggestedConnections:as,suggestedConnectionsTitle:cs,friendsBtn:is,pendingBtn:rs,acceptBtn:os,rejectBtn:ls,friendsStatus:ds,cancelBtn:_s},W=()=>{const[s,m]=b.useState(""),[a,j]=b.useState([]),{data:_,isLoading:p,error:o}=w("suggested-connections"),{data:c,isLoading:x,error:g,refetch:d}=w("users"),C=L(),{t:u}=F();if(o)return e.jsxs("p",{children:["Error loading suggested connections: ",o.message]});if(g)return e.jsxs("p",{children:["Error loading users: ",g.message]});b.useEffect(()=>{(()=>{if(s){const r=(c==null?void 0:c.filter($=>{const ce=$.username.toLowerCase(),ie=`${$.first_name} ${$.last_name}`.toLowerCase();return ce.includes(s.toLowerCase())||ie.includes(s.toLowerCase())}))||[];j(r)}else j([])})()},[s,c]);const l=n=>{m(n.target.value)},y=async n=>{try{await re(n),d()}catch{k.error(u("errorsFriends.send"))}},q=async n=>{try{await J(n),d()}catch{k.error(u("errorsFriends.reject"))}},S=async n=>{try{await K(n),d()}catch{k.error(u("errorsFriends.request"))}},T=async n=>{try{await Q(n),d()}catch{k.error(u("errorsFriends.cancel"))}};return e.jsxs("div",{className:i.addFriend,children:[e.jsx("h1",{className:i.title,children:u("addFriend.title")}),e.jsxs("div",{className:i.searchContainer,children:[e.jsx(O,{className:i.searchIcon}),e.jsx("input",{type:"text",placeholder:u("addFriend.placeholder"),value:s,onChange:l,className:i.searchInput})]}),s===""&&_&&_.length>0&&e.jsxs("div",{className:i.suggestedConnections,children:[e.jsx("h3",{className:i.suggestedConnectionsTitle,children:u("addFriend.Suggested")}),p?e.jsx(I,{}):e.jsx("div",{className:i.results,children:_.map(({user:n,status:r})=>e.jsxs("div",{className:i.userCard,children:[e.jsx("img",{src:n.profile.avatar,alt:n.username,className:i.avatar}),e.jsx("div",{className:i.userInfo,children:e.jsx("span",{className:i.username,children:n.username})}),e.jsxs("div",{className:i.actions,children:[r==="Friends"?e.jsx("span",{className:i.friendsBtn,title:u("addFriend.pupFriend"),children:e.jsx(P,{size:20})}):r==="Pending"?e.jsx("span",{className:i.pendingBtn,title:u("addFriend.pupPending"),children:e.jsx(ge,{size:20})}):e.jsx("button",{onClick:()=>y(n.username),className:i.addFriendBtn,title:u("addFriend.pupAddFriend"),children:e.jsx(H,{size:20})}),e.jsx("button",{className:i.viewProfileBtn,onClick:()=>C(`/profile/${n.username}`),title:u("addFriend.pupViewProfile"),children:e.jsx(G,{size:20})})]})]},n.username))})]}),s!==""&&e.jsx("div",{className:i.results,children:x?e.jsx(I,{}):a.length>0?a.map(n=>e.jsxs("div",{className:i.userCard,children:[e.jsx("img",{src:`${n.profile.avatar}`,alt:n.username,className:i.avatar}),e.jsxs("div",{className:i.userInfo,children:[e.jsx("span",{className:i.username,children:n.username}),e.jsx("span",{className:i.fullName,children:`${n.first_name} ${n.last_name}`.trim()})]}),e.jsxs("div",{className:i.actions,children:[e.jsx("button",{className:i.viewProfileBtn,onClick:()=>C(`/profile/${n.username}`),title:u("addFriend.pupViewProfile"),children:e.jsx(G,{size:20})}),n.friend_request_status==="accepted"?e.jsx("span",{className:i.friendsStatus,title:u("addFriend.pupFriend"),children:e.jsx(P,{size:20})}):n.friend_request_status==="pending"?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>S(n.username),className:i.acceptBtn,title:u("addFriend.pupAccept"),children:e.jsx(V,{size:20})}),e.jsx("button",{onClick:()=>q(n.username),className:i.rejectBtn,title:u("addFriend.pupReject"),children:e.jsx(R,{size:20})})]}):n.friend_request_status==="cancel"?e.jsx("button",{onClick:()=>T(n.username),className:i.cancelBtn,title:u("addFriend.pupCancel"),children:e.jsx(R,{size:20})}):e.jsx("button",{onClick:()=>y(n.username),className:i.addFriendBtn,title:u("addFriend.pupAddFriend"),children:e.jsx(H,{size:20})})]})]},n.username)):e.jsx("div",{className:i.notFound,children:e.jsx("p",{className:i.notFoundText,children:u("addFriend.notFound")})})})]})},ms="_blockedList_10bb9_1",us="_list_10bb9_12",ps="_userInfo_10bb9_21",hs="_timestamp_10bb9_25",js="_title_10bb9_31",xs="_searchContainer_10bb9_38",fs="_searchIcon_10bb9_44",gs="_searchInput_10bb9_53",vs="_userCard_10bb9_69",Ns="_avatar_10bb9_82",bs="_username_10bb9_89",Cs="_unblockButton_10bb9_94",ks="_emptyState_10bb9_110",Fs="_emptyIcon_10bb9_119",$s="_emptyTitle_10bb9_124",Bs="_emptyDescription_10bb9_131",f={blockedList:ms,list:us,userInfo:ps,timestamp:hs,title:js,searchContainer:xs,searchIcon:fs,searchInput:gs,userCard:vs,avatar:Ns,username:bs,unblockButton:Cs,emptyState:ks,emptyIcon:Fs,emptyTitle:$s,emptyDescription:Bs},ws=()=>{const[s,m]=b.useState(""),{t:a}=F(),{data:j=[],isLoading:_,error:p,refetch:o}=w("blocked"),c=async d=>{try{const C=await oe(d);k.success(C.message),o()}catch(C){k.error(C.message||a("errorsFriends.unblock"))}},x=j.filter(d=>d.blocked.username.toLowerCase().includes(s.toLowerCase())),g=()=>e.jsxs("div",{className:f.emptyState,children:[e.jsx(se,{size:80,color:"#6b7280"}),e.jsx("h3",{className:f.emptyTitle,children:a("blockedList.noRequests")}),e.jsx("p",{className:f.emptyDescription,children:a("blockedList.description")})]});return e.jsxs("div",{className:f.blockedList,children:[e.jsx("h1",{className:f.title,children:a("blockedList.title")}),e.jsxs("div",{className:f.searchContainer,children:[e.jsx(O,{className:f.searchIcon}),e.jsx("input",{type:"text",className:f.searchInput,placeholder:a("blockedList.placeholder"),value:s,onChange:d=>m(d.target.value)})]}),e.jsx("div",{className:f.list,children:_?e.jsx(I,{}):p?e.jsx("p",{children:"Error loading friends"}):x.length>0?x.map(d=>e.jsxs("div",{className:f.userCard,children:[e.jsx("img",{src:d.blocked.profile.avatar,alt:d.blocked.username,className:f.avatar}),e.jsxs("div",{className:f.userInfo,children:[e.jsx("span",{className:f.username,children:d.blocked.username}),e.jsxs("span",{className:f.timestamp,children:[" ",A(new Date(d.date_blocked),a("lang"))," "]})]}),e.jsx("button",{className:f.unblockButton,onClick:()=>c(d.blocked.username),title:a("blockedList.pupUnblock"),children:e.jsx(fe,{size:20})})]},d.blocked.id)):g()})]})},Is="_sentRequests_139hd_1",ys="_userInfo_139hd_12",qs="_timestamp_139hd_16",Rs="_title_139hd_22",Ls="_list_139hd_29",Ss="_requestCard_139hd_38",Ts="_avatar_139hd_52",zs="_username_139hd_59",Us="_cancelButton_139hd_64",B={sentRequests:Is,userInfo:ys,timestamp:qs,title:Rs,list:Ls,requestCard:Ss,avatar:Ts,username:zs,cancelButton:Us},Es="_container_1y14f_1",Ds="_iconContainer_1y14f_11",Ms="_icon_1y14f_11",Ps="_title_1y14f_34",Os="_description_1y14f_41",U={container:Es,iconContainer:Ds,icon:Ms,title:Ps,description:Os},As=()=>{const{t:s}=F();return e.jsxs("div",{className:U.container,children:[e.jsx(te,{size:80,color:"#6b7280"}),e.jsx("h2",{className:U.title,children:s("sentRequests.noRequests")}),e.jsx("p",{className:U.description,children:s("sentRequests.description")})]})},Hs=()=>{const{data:s,isLoading:m,error:a,refetch:j}=w("friend-requests/sent"),{t:_}=F(),p=async o=>{try{await Q(o),j()}catch(c){k.error(c.message||_("errorsFriends.cancel"))}};return e.jsxs("div",{className:B.sentRequests,children:[e.jsx("h1",{className:B.title,children:_("sentRequests.title")}),s&&s.length===0?e.jsx(As,{}):e.jsx("div",{className:B.list,children:m?e.jsx(I,{}):a?e.jsx("p",{children:"Error loading friends"}):s==null?void 0:s.map(o=>e.jsxs("div",{className:B.requestCard,children:[e.jsx("img",{src:o.receiver.profile.avatar,alt:o.receiver.username,className:B.avatar}),e.jsxs("div",{className:B.userInfo,children:[e.jsx("span",{className:B.username,children:o.receiver.username}),e.jsx("span",{className:B.timestamp,children:A(new Date(o.timestamp),_("lang"))})]}),e.jsx("button",{className:B.cancelButton,onClick:()=>p(o.receiver.username),title:_("sentRequests.pupCancel"),children:e.jsx(R,{size:20})})]},o.id))})]})},Gs="_friendRequests_1pi1q_1",Ws="_userInfo_1pi1q_12",Xs="_timestamp_1pi1q_16",Vs="_username_1pi1q_22",Js="_notification_1pi1q_28",Ks="_title_1pi1q_42",Qs="_list_1pi1q_48",Ys="_requestCard_1pi1q_57",Zs="_avatar_1pi1q_72",et="_actions_1pi1q_79",st="_acceptButton_1pi1q_84",tt="_rejectBtn_1pi1q_85",v={friendRequests:Gs,userInfo:Ws,timestamp:Xs,username:Vs,notification:Js,title:Ks,list:Qs,requestCard:Ys,avatar:Zs,actions:et,acceptButton:st,rejectBtn:tt},nt="_container_16txc_1",at="_iconContainer_16txc_11",ct="_title_16txc_27",it="_description_16txc_34",E={container:nt,iconContainer:at,title:ct,description:it},rt=()=>{const{t:s}=F();return e.jsxs("div",{className:E.container,children:[e.jsx(ve,{size:80,color:"#6b7280"}),e.jsx("h2",{className:E.title,children:s("friendRequests.noRequests")}),e.jsx("p",{className:E.description,children:s("friendRequests.description")})]})},ot=()=>{const{data:s,isLoading:m,error:a,refetch:j}=w("friend-requests/pending"),{t:_}=F(),p=async c=>{try{await K(c),j()}catch(x){k.error(x.message||_("errorsFriends.request"))}},o=async c=>{try{const x=await J(c);k.success(x.message),j()}catch(x){k.error(x.message||_("errorsFriends.reject"))}};return e.jsxs("div",{className:v.friendRequests,children:[e.jsx("div",{className:v.header,children:e.jsx("h1",{className:v.title,children:_("friendRequests.title")})}),e.jsx("div",{className:v.listContainer,children:m?e.jsx(I,{}):a?e.jsxs("p",{className:v.errorMessage,children:["Error fetching friend requests: ",a.message]}):s&&s.length>0?e.jsx("div",{className:v.list,children:s.map(c=>e.jsxs("div",{className:v.requestCard,children:[e.jsx("img",{src:c.sender.profile.avatar,alt:c.sender.username,className:v.avatar}),e.jsxs("div",{className:v.userInfo,children:[e.jsx("span",{className:v.username,children:c.sender.username}),e.jsx("span",{className:v.timestamp,children:A(new Date(c.timestamp),_("lang"))})]}),e.jsxs("div",{className:v.actions,children:[e.jsx("button",{className:v.acceptButton,onClick:()=>p(c.sender.username),title:_("friendRequests.pupAccept"),children:e.jsx(V,{size:20})}),e.jsx("button",{onClick:()=>o(c.sender.username),className:v.rejectBtn,title:_("friendRequests.pupReject"),children:e.jsx(R,{size:20})})]})]},c.id))}):e.jsx(rt,{})})]})},lt="_onlineFriends_jfl21_1",dt="_title_jfl21_12",_t="_friendList_jfl21_19",mt="_friendCard_jfl21_28",ut="_avatar_jfl21_42",pt="_userInfo_jfl21_49",ht="_username_jfl21_53",jt="_online_jfl21_1",xt="_actions_jfl21_76",ft="_actionButton_jfl21_81",gt="_disabled_jfl21_99",vt="_cooldownTimer_jfl21_104",N={onlineFriends:lt,title:dt,friendList:_t,friendCard:mt,avatar:ut,userInfo:pt,username:ht,online:jt,actions:xt,actionButton:ft,disabled:gt,cooldownTimer:vt},Nt="_container_16txc_1",bt="_iconContainer_16txc_11",Ct="_title_16txc_27",kt="_description_16txc_34",D={container:Nt,iconContainer:bt,title:Ct,description:kt},Ft=()=>{const{t:s}=F();return e.jsxs("div",{className:D.container,children:[e.jsx(ae,{size:80,color:"#6b7280"}),e.jsx("h2",{className:D.title,children:s("onlineFriends.noRequests")}),e.jsx("p",{className:D.description,children:s("onlineFriends.description")})]})},$t=()=>{const s=L(),{user:m}=Y(),{sendMessage:a}=Z(),{data:j,isLoading:_,error:p}=w("online-friends"),[o,c]=b.useState(!1),[x,g]=b.useState(0),{t:d}=F(),C=l=>{o||(a({event:"game_invite",from:m==null?void 0:m.username,to:l}),c(!0),g(10))};b.useEffect(()=>{let l;return o&&x>0&&(l=setInterval(()=>{g(y=>y-1)},1e3)),x===0&&o&&c(!1),()=>clearInterval(l)},[o,x]);const u=l=>{s("/chat",{state:{selectedFriend:l}})};return e.jsxs("div",{className:N.onlineFriends,children:[e.jsx("h1",{className:N.title,children:d("onlineFriends.title")}),e.jsx("div",{className:N.friendList,children:_?e.jsx(I,{}):p?e.jsx("p",{children:"Error: loading"}):j&&j.length>0?j.map(l=>e.jsxs("div",{className:N.friendCard,children:[e.jsx("img",{src:l.profile.avatar,alt:l.username,className:N.avatar}),e.jsxs("div",{className:N.userInfo,children:[e.jsx("span",{className:N.username,children:l.username}),e.jsx("span",{className:N.online,children:d("onlineFriends.online")})]}),e.jsxs("div",{className:N.actions,children:[e.jsx("button",{className:`${N.actionButton} ${N.messageButton}`,onClick:()=>u(l.username),title:d("allFriends.pupMessage"),children:e.jsx(ne,{size:20})}),e.jsx("button",{className:`${N.actionButton} ${o?N.disabled:""}`,onClick:()=>C(l.username),title:d("allFriends.pupInvite"),children:o?e.jsxs(e.Fragment,{children:[" ",e.jsx("img",{src:"/icons/chat/Invite.svg",alt:"Invite"})," ",e.jsxs("span",{className:N.cooldownTimer,children:[x,"s"]})," "]}):e.jsx("img",{src:"/icons/chat/Invite.svg",alt:"Invite"})})]})]},l.id)):e.jsx(Ft,{})})]})},Bt="_allFriends_17kws_1",wt="_friendList_17kws_14",It="_userInfo_17kws_24",yt="_title_17kws_28",qt="_searchContainer_17kws_35",Rt="_searchIcon_17kws_41",Lt="_searchInput_17kws_50",St="_friendCard_17kws_66",Tt="_avatar_17kws_80",zt="_username_17kws_87",Ut="_Online_17kws_93",Et="_Offline_17kws_111",Dt="_actions_17kws_131",Mt="_actionButton_17kws_137",Pt="_disabled_17kws_149",Ot="_cooldownTimer_17kws_154",At="_blockButton_17kws_167",Ht="_removeButton_17kws_167",Gt="_messageButton_17kws_170",Wt="_inviteButton_17kws_170",h={allFriends:Bt,friendList:wt,userInfo:It,title:yt,searchContainer:qt,searchIcon:Rt,searchInput:Lt,friendCard:St,avatar:Tt,username:zt,Online:Ut,Offline:Et,actions:Dt,actionButton:Mt,disabled:Pt,cooldownTimer:Ot,blockButton:At,removeButton:Ht,messageButton:Gt,inviteButton:Wt},Xt="_container_1rkt3_1",Vt="_iconContainer_1rkt3_11",Jt="_title_1rkt3_27",Kt="_description_1rkt3_34",M={container:Xt,iconContainer:Vt,title:Jt,description:Kt},Qt=()=>{const{t:s}=F();return e.jsxs("div",{className:M.container,children:[e.jsx(P,{size:80,color:"#6b7280"}),e.jsx("h2",{className:M.title,children:s("allFriends.noRequests")}),e.jsx("p",{className:M.description,children:s("allFriends.description")})]})},Yt=()=>{const[s,m]=b.useState(""),a=L(),{user:j}=Y(),{sendMessage:_}=Z(),{data:p,isLoading:o,error:c,refetch:x}=w("friends"),[g,d]=b.useState(!1),[C,u]=b.useState(0),{t:l}=F(),y=r=>{g||(_({event:"game_invite",from:j==null?void 0:j.username,to:r}),d(!0),u(10))};b.useEffect(()=>{let r;return g&&C>0&&(r=setInterval(()=>{u($=>$-1)},1e3)),C===0&&g&&d(!1),()=>clearInterval(r)},[g,C]);const q=p?p.filter(r=>r.username.toLowerCase().includes(s.toLowerCase())):[],S=r=>{a("/chat",{state:{selectedFriend:r}})},T=async r=>{try{await le(r),x()}catch($){k.error($.message||l("errorsFriends.block"))}},n=async r=>{try{await de(r),x()}catch($){k.error($.message||l("errorsFriends.remove"))}};return e.jsxs("div",{className:h.allFriends,children:[e.jsx("h1",{className:h.title,children:l("allFriends.title")}),e.jsxs("div",{className:h.searchContainer,children:[e.jsx(O,{className:h.searchIcon}),e.jsx("input",{type:"text",className:h.searchInput,placeholder:l("allFriends.placeholder"),value:s,onChange:r=>m(r.target.value)})]}),e.jsx("div",{className:h.friendList,children:o?e.jsx(I,{}):c?e.jsx("p",{children:"Error loading friends"}):q.length>0?q.map(r=>e.jsxs("div",{className:h.friendCard,children:[e.jsx("img",{src:r.profile.avatar,alt:r.username,className:h.avatar}),e.jsxs("div",{className:h.userInfo,children:[e.jsx("span",{className:h.username,children:r.username}),r.profile.is_online?e.jsx("span",{className:h.Online,children:l("allFriends.online")}):e.jsx("span",{className:h.Offline,children:l("allFriends.offline")})]}),e.jsxs("div",{className:h.actions,children:[e.jsx("button",{className:`${h.actionButton} ${h.messageButton}`,onClick:()=>S(r.username),title:l("allFriends.pupMessage"),children:e.jsx(ne,{size:20})}),e.jsx("button",{className:`${h.actionButton} ${g?h.disabled:""}`,onClick:()=>y(r.username),title:l("allFriends.pupInvite"),children:g?e.jsxs(e.Fragment,{children:[" ",e.jsx("img",{src:"/icons/chat/Invite.svg",alt:"Invite"})," ",e.jsxs("span",{className:h.cooldownTimer,children:[C,"s"]})," "]}):e.jsx("img",{src:"/icons/chat/Invite.svg",alt:"Invite"})}),e.jsx("button",{className:`${h.actionButton} ${h.blockButton}`,onClick:()=>T(r.username),title:l("allFriends.pupBlock"),children:e.jsx(se,{size:20})}),e.jsx("button",{className:`${h.actionButton} ${h.removeButton}`,onClick:()=>n(r.username),title:l("allFriends.pupMessage"),children:e.jsx(te,{size:20})})]})]},r.id)):e.jsx(Qt,{})})]})},pn=()=>{const{isLoggedIn:s}=_e(),[m,a]=b.useState("add");if(b.useEffect(()=>{const p=new URLSearchParams(location.search).get("view");p&&a(p)},[location.search,s]),!s)return e.jsx(me,{to:"/signup"});const j=()=>{switch(m){case"add":return e.jsx(W,{});case"blocked":return e.jsx(ws,{});case"sent":return e.jsx(Hs,{});case"requests":return e.jsx(ot,{});case"online":return e.jsx($t,{});case"all":return e.jsx(Yt,{});default:return e.jsx(W,{})}};return e.jsx("main",{className:z.CenterContainer,children:e.jsxs("div",{className:z.container,children:[e.jsx("div",{className:z.content,children:j()}),e.jsx(Ue,{setView:a,currentView:m})]})})};export{pn as default};
