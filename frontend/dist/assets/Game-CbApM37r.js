var Ln=Object.defineProperty;var On=(t,n,s)=>n in t?Ln(t,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[n]=s;var ae=(t,n,s)=>On(t,typeof n!="symbol"?n+"":n,s);import{c as we,j as e,u as te,r as a,q as Ce,x as Rt,B as Me,a6 as ut,p as _e,ab as Wn,ac as Ze,ad as Xe,ae as Qe,af as jt}from"./index-erQsObJq.js";import{d as In}from"./index-DfG7zr7K.js";import{S as mt}from"./swords-BhQSw9JP.js";import{T as Mt}from"./trophy-BqR6-eXt.js";import{B as Gn}from"./ban-Dj5hQc8o.js";import{f as pt}from"./helpers-BRqGwH6J.js";import{c as At,b as Fn}from"./index-Bxpv-s6_.js";import{u as Ae,P as Pe,c as be,d as _t,R as Hn,S as Pt,h as zn,e as qn,F as Vn,D as Un,i as Kn,a as Jn,b as et,j as Yn}from"./Combination-DAROaq0H.js";import{d as Et,e as Bt}from"./index-DRSugL2N.js";import{G as Lt}from"./gamepad-2-CbFSVD6N.js";import{U as wt}from"./users-CJsmYFnL.js";import"./iconBase-Dy7Lu4j7.js";/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=we("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=we("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=we("DoorOpen",[["path",{d:"M13 4h3a2 2 0 0 1 2 2v14",key:"hrm0s9"}],["path",{d:"M2 20h3",key:"1gaodv"}],["path",{d:"M13 20h9",key:"s90cdi"}],["path",{d:"M10 12v.01",key:"vx6srw"}],["path",{d:"M13 4.562v16.157a1 1 0 0 1-1.242.97L5 20V5.562a2 2 0 0 1 1.515-1.94l4-1A2 2 0 0 1 13 4.561Z",key:"199qr4"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=we("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=we("Radar",[["path",{d:"M19.07 4.93A10 10 0 0 0 6.99 3.34",key:"z3du51"}],["path",{d:"M4 6h.01",key:"oypzma"}],["path",{d:"M2.29 9.62A10 10 0 1 0 21.31 8.35",key:"qzzz0"}],["path",{d:"M16.24 7.76A6 6 0 1 0 8.23 16.67",key:"1yjesh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M17.99 11.66A6 6 0 0 1 15.77 16.67",key:"1u2y91"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"m13.41 10.59 5.66-5.66",key:"mhq4k0"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=we("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=we("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),rs="_container_176lr_1",as="_topContainer_176lr_18",os="_left_176lr_23",cs="_right_176lr_37",ls="_bottomContainer_176lr_46",is="_innerContent_176lr_54",ds="_card_176lr_60",us="_bottomCard_176lr_71",ms="_header_176lr_80",ps="_title_176lr_85",_s="_content_176lr_92",fs="_bottomCardContent_176lr_98",hs="_statContainer_176lr_107",gs="_statItem_176lr_113",xs="_statHeader_176lr_119",ys="_statName_176lr_125",vs="_statValue_176lr_129",js="_progressBar_176lr_133",ws="_progressFill_176lr_141",Ns="_cardMode_176lr_149",Ss="_cardHoveredMode_176lr_172",bs="_cardContentMode_176lr_176",ks="_item_176lr_187",Cs="_iconMode_176lr_198",$s="_titleMode_176lr_205",Ds="_descriptionMode_176lr_210",Ts="_arrowIconMode_176lr_216",Rs="_arrowIconHoveredMode_176lr_226",Ms="_matchmakingLoader_176lr_231",As="_matchmakingLoaderWrapper_176lr_235",Ps="_tournamentItem_176lr_242",Es="_rightAligned_176lr_263",Bs="_tournamentDate_176lr_267",Ls="_tournamentPlayerCount_176lr_268",Os="_tournamentStatus_176lr_271",Ws="_tournamentName_176lr_276",Is="_loaderWrapper_176lr_283",Gs="_errorWrapper_176lr_284",Fs="_noTournaments_176lr_293",Hs="_modalOverlay_176lr_307",L={container:rs,topContainer:as,left:os,right:cs,bottomContainer:ls,innerContent:is,card:ds,bottomCard:us,header:ms,title:ps,content:_s,bottomCardContent:fs,statContainer:hs,statItem:gs,statHeader:xs,statName:ys,statValue:vs,progressBar:js,progressFill:ws,cardMode:Ns,cardHoveredMode:Ss,cardContentMode:bs,item:ks,iconMode:Cs,titleMode:$s,descriptionMode:Ds,arrowIconMode:Ts,arrowIconHoveredMode:Rs,matchmakingLoader:Ms,matchmakingLoaderWrapper:As,tournamentItem:Ps,rightAligned:Es,tournamentDate:Bs,tournamentPlayerCount:Ls,tournamentStatus:Os,tournamentName:Ws,loaderWrapper:Is,errorWrapper:Gs,noTournaments:Fs,modalOverlay:Hs},zs="_container_aje60_1",qs="_gameArea_aje60_18",Vs="_gameCanvas_aje60_1",Us="_score_aje60_55",Ks="_gameOverScreen_aje60_71",Js="_gameScreenDiv_aje60_81",Ys="_scoreWrapper_aje60_95",Zs="_player1Score_aje60_104",Xs="_player2Score_aje60_104",Qs="_optionsPanel_aje60_122",er="_matchmakingLoader_aje60_129",tr="_matchmakingLoaderWrapper_aje60_133",ge={container:zs,gameArea:qs,gameCanvas:Vs,score:Us,gameOverScreen:Ks,gameScreenDiv:Js,scoreWrapper:Ys,player1Score:Zs,player2Score:Xs,optionsPanel:Qs,matchmakingLoader:er,matchmakingLoaderWrapper:tr},nr="_button_1f8ij_1",sr={button:nr},de=({onClick:t,children:n,className:s=""})=>e.jsx("button",{className:`${s||sr.button}`,onClick:t,children:n}),rr="_endGameScreen_1vovs_1",ar="_winMessage_1vovs_21",Nt={endGameScreen:rr,winMessage:ar},ft=({isWinner:t,handleRetry:n,handleMainMenu:s,isMatchTournament:c=!1,isLocalGame:r=!1,isOnePlayerMode:o=!1})=>{const{t:i}=te();return a.useEffect(()=>{const d=setTimeout(()=>{s()},3e3);return()=>{clearTimeout(d)}},[]),e.jsxs("div",{className:Nt.endGameScreen,children:[e.jsxs("div",{className:Nt.winMessage,children:[r&&i(t?o?"game.localGame.EndGameScreen.YouWin":"game.localGame.EndGameScreen.Player1Wins":o?"game.localGame.EndGameScreen.ComputerWins":"game.localGame.EndGameScreen.Player2Wins"),!r&&i(t?"game.localGame.EndGameScreen.Win":"game.localGame.EndGameScreen.Lose")]}),!c&&e.jsx(de,{onClick:n,children:i("game.localGame.EndGameScreen.PlayAgain")}),e.jsx(de,{onClick:s,children:i("game.localGame.EndGameScreen.GoBack")})]})},or="_returnIcon_ydv70_1",cr={returnIcon:or},Ye=({onClick:t})=>e.jsx(In,{size:30,className:cr.returnIcon,onClick:t}),lr=()=>e.jsxs("div",{className:"ml-auto mr-auto w-[662px] bg-gray-900 text-white py-4 px-5 flex items-center justify-between border rounded-full border-red-500 animate-pulse",children:[e.jsxs("div",{className:"flex items-center gap-3 space-x-3",children:[e.jsx("div",{className:"w-16 h-16 rounded-full border-2 border-green-500 bg-gray-700 animate-pulse"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"h-6 w-24 bg-gray-700 rounded mb-2"}),e.jsx("div",{className:"h-4 w-16 bg-gray-700 rounded"})]})]}),e.jsx("div",{className:"flex items-center",children:e.jsx(mt,{className:"text-red-500/50",size:24})}),e.jsxs("div",{className:"flex items-center gap-3 space-x-3 flex-row-reverse text-right",children:[e.jsx("div",{className:"w-16 h-16 rounded-full border-2 border-red-500 bg-gray-700 animate-pulse"}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("div",{className:"h-6 w-24 bg-gray-700 rounded mb-2"}),e.jsx("div",{className:"h-4 w-16 bg-gray-700 rounded"})]})]})]}),ir=({gameState:t})=>{const[n,s]=a.useState(0);a.useEffect(()=>{if(t!="started")return;const r=setInterval(()=>{s(o=>o+1)},1e3);return()=>clearInterval(r)},[t]);const c=r=>{const o=Math.floor(r/60),i=r%60;return`${o.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`};return e.jsx("div",{className:"font-mono text-2xl",children:c(n)})},dr=({p1_id:t,p2_id:n,player:s,gameState:c})=>{const{data:r,isLoading:o,error:i}=Ce(`users/${t}`),{data:d,isLoading:l,error:m}=Ce(`users/${n}`);return o||l||i||m?e.jsx(lr,{}):e.jsxs("div",{className:"ml-auto mr-auto w-[662px] bg-gray-900 text-white py-4 px-5 flex items-center justify-between border rounded-full border-red-500",children:[e.jsxs("div",{className:"flex items-center gap-3 space-x-3",children:[e.jsx("div",{className:"w-16 h-16 rounded-full border-2 border-green-500 overflow-hidden",children:e.jsx("img",{src:s==="player1"?r==null?void 0:r.profile.avatar:d==null?void 0:d.profile.avatar,alt:s==="player1"?r==null?void 0:r.username:d==null?void 0:d.username,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-lg",children:s==="player1"?r==null?void 0:r.username:d==null?void 0:d.username}),e.jsxs("div",{className:"flex items-center space-x-1 mt-0.5",children:[e.jsx("img",{src:s==="player1"?r==null?void 0:r.profile.badge.icon:d==null?void 0:d.profile.badge.icon,className:"h-8 w-8",alt:""}),e.jsx("span",{className:"text-base text-gray-400",children:s==="player1"?r==null?void 0:r.profile.badge.name:d==null?void 0:d.profile.badge.name})]})]})]}),e.jsxs("div",{className:"flex items-center justify-center flex-col gap-1",children:[e.jsx(mt,{className:"text-red-500/50 animate-pulse",size:24}),e.jsx(ir,{gameState:c})]}),e.jsxs("div",{className:"flex items-center gap-3 space-x-3 flex-row-reverse text-right",children:[e.jsx("div",{className:"w-16 h-16 rounded-full border-2 border-red-500 overflow-hidden",children:e.jsx("img",{src:s==="player2"?r==null?void 0:r.profile.avatar:d==null?void 0:d.profile.avatar,alt:s==="player2"?r==null?void 0:r.username:d==null?void 0:d.username,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("span",{className:"font-semibold text-lg",children:s==="player2"?r==null?void 0:r.username:d==null?void 0:d.username}),e.jsxs("div",{className:"flex items-center space-x-1 mt-0.5",children:[e.jsx("span",{className:"text-base text-gray-400",children:s==="player2"?r==null?void 0:r.profile.badge.name:d==null?void 0:d.profile.badge.name}),e.jsx("img",{src:s==="player1"?r==null?void 0:r.profile.badge.icon:d==null?void 0:d.profile.badge.icon,className:"h-8 w-8",alt:""})]})]})]})]})},tt=650,Ie=480,nt=20,Ge=80,it=({game_address:t,requestRemoteGame:n=()=>{},onReturn:s,isMatchTournament:c=!1,p1_id:r,p2_id:o})=>{const i=a.useRef(null),[d,l]=a.useState(null),[m,f]=a.useState(!1),[x,j]=a.useState(""),[b,I]=a.useState("game"),[w,G]=a.useState(!1),[Q,H]=a.useState(!1),[q,T]=a.useState(!0),[S,U]=a.useState(3),{t:K}=te(),{refetch:k}=Rt(),R=a.useRef(null),[_,M]=a.useState(0),[v,se]=a.useState(0),A=a.useRef(new Audio("/sounds/wall-hit.mp3")),C=a.useRef(new Audio("/sounds/paddle-hit.mp3")),y=a.useRef({x:tt/2,y:Ie/2,radius:8}),Z=a.useRef({x:10,y:Ie/2-Ge/2,w:nt,h:Ge,dy:0}),J=a.useRef({x:tt-10-nt,y:Ie/2-Ge/2,w:nt,h:Ge,dy:0});a.useEffect(()=>{T(!0),A.current.preload="auto",A.current.load(),C.current.preload="auto",C.current.load()},[q]),a.useEffect(()=>{const P=V=>{V!=="started"&&(Me.info("Sorry the other player didn't make it"),i.current&&i.current.readyState===WebSocket.OPEN&&(i.current.send(JSON.stringify({type:"player_left"})),i.current.close()),Y())},E=setTimeout(()=>{P(d)},6e3);return()=>{clearTimeout(E)}},[d]),a.useEffect(()=>{l(null);let P=null;const E=`${ut(`${t}/`)}`;if(i.current||(P=new WebSocket(E)),!!P)return i.current=P,P.onerror=V=>{console.error("WebSocket error:",V),Y()},P.onopen=()=>{l("waiting")},P.onmessage=V=>{const N=JSON.parse(V.data);N.type==="game_started"&&(Z.current.x=N.state.player1_paddle_x,J.current.x=N.state.player2_paddle_x,l("started")),N.type==="go_home"&&Y(),N.type==="player_id"&&j(N.player),N.type==="game_update"&&(y.current.x=N.state.ball.x,y.current.y=N.state.ball.y,Z.current.y=N.state.player1_paddle_y,J.current.y=N.state.player2_paddle_y),N.type==="play_sound"&&(N.collision==="wall"?A.current&&q&&A.current.play():N.collision==="paddle"&&C.current&&q&&C.current.play()),N.type==="score_update"&&(M(N.state.player1_score),se(N.state.player2_score),N.state.game_over&&(H(N.state.is_winner),G(!0),l("ended"),I("end"),P.close(),i.current=null,k())),N.type==="game_countdown"&&U(N.count)},P.onclose=()=>{},()=>{i.current&&i.current.close()}},[m]),a.useEffect(()=>{if(w||d!="started")return;const P=R.current;if(!P)return;const E=P.getContext("2d"),V=()=>{E.setLineDash([15,7.1]),E.strokeStyle="#f8f3e3",E.lineWidth=3,E.beginPath(),E.moveTo(P.width/2,10),E.lineTo(P.width/2,P.height-10),E.stroke(),E.setLineDash([])},N=[!1],oe=u=>{(u.key==="w"||u.key==="W"||u.key==="ArrowUp")&&(N[0]=!0),(u.key==="s"||u.key==="S"||u.key==="ArrowDown")&&(N[1]=!0)},ce=u=>{(u.key==="w"||u.key==="s"||u.key==="W"||u.key==="S"||u.key==="ArrowUp"||u.key==="ArrowDown")&&(N[0]=!1,N[1]=!1)},p=u=>{V();const F=y.current,ee=Z.current,h=J.current;u.fillStyle="#f8f3e3",u.fillRect(F.x-F.radius,F.y-F.radius,F.radius*2,F.radius*2),u.fillStyle="white",u.fillRect(ee.x,ee.y,ee.w,ee.h),u.fillStyle="white",u.fillRect(h.x,h.y,h.w,h.h)},X=()=>{i.current&&i.current.readyState===WebSocket.OPEN&&N[0]&&i.current.send(JSON.stringify({type:"keydown",direction:"up"})),i.current&&i.current.readyState===WebSocket.OPEN&&N[1]&&i.current.send(JSON.stringify({type:"keydown",direction:"down"}))},re=()=>{w||(E.clearRect(0,0,P.width,P.height),X(),p(E),requestAnimationFrame(re))};return window.addEventListener("keydown",u=>oe(u)),window.addEventListener("keyup",u=>ce(u)),re(),()=>{window.removeEventListener("keydown",u=>oe(u)),window.removeEventListener("keyup",u=>ce(u))}},[w,d]);const ne=()=>{n(),l(null),G(!1),f(P=>!P)},Y=()=>{s()};return e.jsxs("div",{className:ge.container,children:[e.jsx(dr,{p1_id:r,p2_id:o,player:x,gameState:d}),d==="started"||d==="ended"?e.jsxs("div",{className:ge.gameArea,children:[b==="game"&&e.jsxs("div",{id:"gameScreen",className:ge.gameScreenDiv,children:[e.jsxs("div",{className:ge.scoreWrapper,children:[e.jsx("div",{className:ge.player1Score,children:_}),e.jsx("div",{className:ge.player2Score,children:v})]}),e.jsx("canvas",{width:tt,height:Ie,id:ge.gameCanvas,ref:R})]}),b==="end"&&e.jsx(ft,{isWinner:Q,handleRetry:ne,handleMainMenu:Y,isMatchTournament:c})]}):e.jsx("div",{className:ge.gameArea,children:e.jsx("div",{className:"relative flex flex-col items-center",children:e.jsx("div",{className:"text-9xl font-bold mb-8 transition-all duration-500",style:{opacity:S===1?0:1,transform:`scale(${S===1?1.5:1})`},children:S||e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"text-6xl font-bold animate-pulse text-yellow-400",children:K("game.gameArea")})})})})}),e.jsx(Ye,{onClick:s})]})},ur="_container_1kx0u_3",mr="_tournamentList_1kx0u_20",pr="_loaderWrapper_1kx0u_27",_r="_errorWrapper_1kx0u_28",fr="_noTournaments_1kx0u_37",hr="_header_1kx0u_55",gr="_row_1kx0u_56",xr="_col_1kx0u_85",yr="_id_1kx0u_90",vr="_name_1kx0u_94",jr="_creator_1kx0u_98",wr="_date_1kx0u_102",Nr="_players_1kx0u_103",Sr="_action_1kx0u_107",B={container:ur,tournamentList:mr,loaderWrapper:pr,errorWrapper:_r,noTournaments:fr,header:hr,row:gr,col:xr,id:yr,name:vr,creator:jr,date:wr,players:Nr,action:Sr},br="_loader_1q8ne_2",kr="_l3_1q8ne_1",Cr={loader:br,l3:kr},Ot=({className:t=""})=>e.jsx("div",{className:`${Cr.loader} ${t}`}),$r="_container_kp6yh_11",Dr="_circle_kp6yh_21",Tr="_circleBorder_kp6yh_22",Rr="_error_kp6yh_65",st={container:$r,circle:Dr,circleBorder:Tr,"success-anim":"_success-anim_kp6yh_1","circle-anim":"_circle-anim_kp6yh_1",error:Rr},Wt=()=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:st.circleBorder}),e.jsx("div",{className:st.circle,children:e.jsx("div",{className:st.error})})]}),It=({size:t=24,color:n="#999999"})=>e.jsxs("div",{className:"relative inline-block",children:[e.jsx(Mt,{size:t,color:n}),e.jsx(Gn,{size:t,color:n,className:"absolute top-0 left-0 opacity-50"})]}),Mr=({handleJoin:t,tournaments:n,error:s,isLoading:c})=>{const{t:r}=te();return e.jsxs("div",{className:B.container,children:[e.jsxs("div",{className:B.header,children:[e.jsx("div",{className:`${B.col} ${B.id}`,children:r("game.openTournaments.header.id")}),e.jsx("div",{className:`${B.col} ${B.name}`,children:r("game.openTournaments.header.name")}),e.jsx("div",{className:`${B.col} ${B.creator}`,children:r("game.openTournaments.header.creator")}),e.jsx("div",{className:`${B.col} ${B.date}`,children:r("game.openTournaments.header.creationDate")}),e.jsx("div",{className:`${B.col} ${B.players}`,children:r("game.openTournaments.header.players")}),e.jsx("div",{className:`${B.col} ${B.action}`,children:r("game.openTournaments.header.action")})]}),e.jsxs("div",{className:B.tournamentList,children:[!s&&(n==null?void 0:n.map(o=>e.jsxs("div",{className:`${B.row}`,children:[e.jsx("div",{className:`${B.col} ${B.id}`,children:o.id}),e.jsxs("div",{className:`${B.col} ${B.name}`,children:[o.name.slice(0,15),o.name.length>=15?"...":""]}),e.jsx("div",{className:`${B.col} ${B.creator}`,children:o.creator.username}),e.jsx("div",{className:`${B.col} ${B.date}`,children:pt(o.created_at,r("lang"))}),e.jsxs("div",{className:`${B.col} ${B.players}`,children:[o.participants_count,"/",o.number_of_players]}),e.jsx("div",{className:`${B.col} ${B.action}`,children:e.jsx("button",{onClick:()=>t(o.id),children:r("game.openTournaments.joinButton")})})]},o.id))),!s&&!c&&!(n!=null&&n.length)&&e.jsxs("div",{className:B.noTournaments,children:[e.jsx(It,{size:58}),e.jsx("p",{children:r("game.openTournaments.noTournaments")})]}),s&&e.jsx("div",{className:B.errorWrapper,children:e.jsx(Wt,{})}),!s&&c&&e.jsx("div",{className:B.loaderWrapper,children:e.jsx(Ot,{})})]})]})},Ar="_container_prll8_2",Pr="_bracket_prll8_16",Er="_round_prll8_26",Br="_winners_prll8_31",Lr="_matchups_prll8_36",Or="_matchup_prll8_36",Wr="_participants_prll8_40",Ir="_participant_prll8_40",Gr="_winner_prll8_31",Fr="_loser_prll8_63",Hr="_connector_prll8_75",zr="_filled_prll8_75",qr="_line_prll8_75",Vr="_bottom_prll8_76",Ur="_merger_prll8_76",Kr="_top_prll8_77",Jr="_quarterfinals_prll8_121",Yr="_finals_prll8_130",Zr="_tournamentBody_prll8_170",Xr="_infoList_prll8_180",Qr="_item_prll8_198",ea="_itemLabel_prll8_210",ta="_text_prll8_219",$={container:Ar,bracket:Pr,round:Er,winners:Br,matchups:Lr,matchup:Or,participants:Wr,participant:Ir,winner:Gr,loser:Fr,connector:Hr,filled:zr,line:qr,bottom:Vr,merger:Ur,top:Kr,quarterfinals:Jr,finals:Yr,tournamentBody:Zr,infoList:Xr,item:Qr,itemLabel:ea,text:ta},na="_rounds_1dk6n_3",sa="_round_1dk6n_3",ra="_roundLabel_1dk6n_20",dt={rounds:na,round:sa,roundLabel:ra};function St({children:t}){return e.jsx("div",{className:dt.round,children:e.jsx("p",{className:dt.roundLabel,children:t})})}const Gt=()=>{const{t}=te();return e.jsxs("div",{className:dt.rounds,children:[e.jsx(St,{children:t("game.localTournament.TournamentHeader.Round1")}),e.jsx(St,{children:t("game.localTournament.TournamentHeader.Finals")})]})},aa="_overlay_dgp19_2",oa="_overlayContent_dgp19_15",ca="_winnerCard_dgp19_43",la="_body_dgp19_52",ia="_rank_dgp19_62",da="_icon_dgp19_72",ua="_gradientLine_dgp19_77",ma="_Gold_dgp19_81",pe={overlay:aa,overlayContent:oa,winnerCard:ca,body:la,"-topalign":"_-topalign_dgp19_58",rank:ia,icon:da,gradientLine:ua,Gold:ma},pa=({winner:t})=>e.jsxs("div",{className:pe.winnerCard,children:[e.jsx("div",{className:`${pe.gradientLine} ${pe.Gold}`}),e.jsx("div",{className:pe.body,children:e.jsxs("div",{className:pe.rank,children:[e.jsx("img",{className:pe.icon,src:"/icon-medal-first.svg",alt:"Icon medal first"}),e.jsxs("p",{children:[t," 🎉🎉🎉"]})]})})]}),Ft=({winner:t,setShowWinner:n})=>{const s=c=>{c.target.classList.contains(pe.overlay)&&n(!1)};return e.jsx("div",{className:pe.overlay,onClick:s,children:e.jsx("div",{className:pe.overlayContent,children:e.jsx(pa,{winner:t})})})},_a={"form-control":"_form-control_1ckur_22","form-control--disabled":"_form-control--disabled_1ckur_36"},Ne=({checked:t=!1})=>e.jsx("input",{className:`${_a["form-control"]}`,type:"checkbox",name:"checkbox",checked:t,disabled:!0}),fa="_container_16o6g_1",ha="_button_16o6g_11",ga="_ready_16o6g_37",xa="_notReady_16o6g_44",ya="_loading_16o6g_54",va="_hovered_16o6g_59",ja="_pulseEffect_16o6g_63",wa="_pulse_16o6g_63",Na="_pulseEffectReady_16o6g_70",Sa="_sparkleEffect_16o6g_74",ba="_loadingOverlay_16o6g_80",ka="_spinner_16o6g_90",Ca="_spin_16o6g_90",$a="_checkIcon_16o6g_99",Da="_bounce_16o6g_1",le={container:fa,button:ha,ready:ga,notReady:xa,loading:ya,hovered:va,pulseEffect:ja,pulse:wa,pulseEffectReady:Na,sparkleEffect:Sa,loadingOverlay:ba,spinner:ka,spin:Ca,checkIcon:$a,bounce:Da},Ta=({isReady:t,setIsReady:n,handleReady:s,handleCancel:c})=>{const[r,o]=a.useState(!1),[i,d]=a.useState(!1),{t:l}=te(),m=a.useCallback(()=>{i||(d(!0),t||s(),t&&c(),setTimeout(()=>{n(f=>!f),d(!1)},1500))},[i]);return e.jsx("div",{className:le.container,children:e.jsxs("button",{onClick:m,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),disabled:i,className:`
          ${le.button}
          ${t?le.ready:le.notReady}
          ${r&&!i?le.hovered:""}
          ${i?le.loading:""}
        `,children:[t&&e.jsx("div",{className:`${le.pulseEffect} ${le.pulseEffectReady}`}),i&&e.jsx("div",{className:le.loadingOverlay,children:e.jsx("div",{className:le.spinner})}),r&&!i&&e.jsx("div",{className:le.sparkleEffect}),e.jsxs("span",{className:"relative z-10 flex items-center justify-center gap-2",children:[l(i?t?"game.remoteTournament.sparkleEffect.cancel":"game.remoteTournament.sparkleEffect.loading":t?"game.remoteTournament.sparkleEffect.ready":"game.remoteTournament.sparkleEffect.readyUp"),t&&!i&&e.jsx("svg",{className:le.checkIcon,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]})]})})};var ht="Dialog",[Ht,zt]=At(ht),[Ra,ue]=Ht(ht),qt=t=>{const{__scopeDialog:n,children:s,open:c,defaultOpen:r,onOpenChange:o,modal:i=!0}=t,d=a.useRef(null),l=a.useRef(null),[m=!1,f]=Jn({prop:c,defaultProp:r,onChange:o});return e.jsx(Ra,{scope:n,triggerRef:d,contentRef:l,contentId:et(),titleId:et(),descriptionId:et(),open:m,onOpenChange:f,onOpenToggle:a.useCallback(()=>f(x=>!x),[f]),modal:i,children:s})};qt.displayName=ht;var Vt="DialogTrigger",Ut=a.forwardRef((t,n)=>{const{__scopeDialog:s,...c}=t,r=ue(Vt,s),o=Ae(n,r.triggerRef);return e.jsx(Pe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":yt(r.open),...c,ref:o,onClick:be(t.onClick,r.onOpenToggle)})});Ut.displayName=Vt;var gt="DialogPortal",[Ma,Kt]=Ht(gt,{forceMount:void 0}),Jt=t=>{const{__scopeDialog:n,forceMount:s,children:c,container:r}=t,o=ue(gt,n);return e.jsx(Ma,{scope:n,forceMount:s,children:a.Children.map(c,i=>e.jsx(_t,{present:s||o.open,children:e.jsx(Kn,{asChild:!0,container:r,children:i})}))})};Jt.displayName=gt;var Ve="DialogOverlay",Yt=a.forwardRef((t,n)=>{const s=Kt(Ve,t.__scopeDialog),{forceMount:c=s.forceMount,...r}=t,o=ue(Ve,t.__scopeDialog);return o.modal?e.jsx(_t,{present:c||o.open,children:e.jsx(Aa,{...r,ref:n})}):null});Yt.displayName=Ve;var Aa=a.forwardRef((t,n)=>{const{__scopeDialog:s,...c}=t,r=ue(Ve,s);return e.jsx(Hn,{as:Pt,allowPinchZoom:!0,shards:[r.contentRef],children:e.jsx(Pe.div,{"data-state":yt(r.open),...c,ref:n,style:{pointerEvents:"auto",...c.style}})})}),je="DialogContent",Zt=a.forwardRef((t,n)=>{const s=Kt(je,t.__scopeDialog),{forceMount:c=s.forceMount,...r}=t,o=ue(je,t.__scopeDialog);return e.jsx(_t,{present:c||o.open,children:o.modal?e.jsx(Pa,{...r,ref:n}):e.jsx(Ea,{...r,ref:n})})});Zt.displayName=je;var Pa=a.forwardRef((t,n)=>{const s=ue(je,t.__scopeDialog),c=a.useRef(null),r=Ae(n,s.contentRef,c);return a.useEffect(()=>{const o=c.current;if(o)return zn(o)},[]),e.jsx(Xt,{...t,ref:r,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:be(t.onCloseAutoFocus,o=>{var i;o.preventDefault(),(i=s.triggerRef.current)==null||i.focus()}),onPointerDownOutside:be(t.onPointerDownOutside,o=>{const i=o.detail.originalEvent,d=i.button===0&&i.ctrlKey===!0;(i.button===2||d)&&o.preventDefault()}),onFocusOutside:be(t.onFocusOutside,o=>o.preventDefault())})}),Ea=a.forwardRef((t,n)=>{const s=ue(je,t.__scopeDialog),c=a.useRef(!1),r=a.useRef(!1);return e.jsx(Xt,{...t,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,d;(i=t.onCloseAutoFocus)==null||i.call(t,o),o.defaultPrevented||(c.current||(d=s.triggerRef.current)==null||d.focus(),o.preventDefault()),c.current=!1,r.current=!1},onInteractOutside:o=>{var l,m;(l=t.onInteractOutside)==null||l.call(t,o),o.defaultPrevented||(c.current=!0,o.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const i=o.target;((m=s.triggerRef.current)==null?void 0:m.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&r.current&&o.preventDefault()}})}),Xt=a.forwardRef((t,n)=>{const{__scopeDialog:s,trapFocus:c,onOpenAutoFocus:r,onCloseAutoFocus:o,...i}=t,d=ue(je,s),l=a.useRef(null),m=Ae(n,l);return qn(),e.jsxs(e.Fragment,{children:[e.jsx(Vn,{asChild:!0,loop:!0,trapped:c,onMountAutoFocus:r,onUnmountAutoFocus:o,children:e.jsx(Un,{role:"dialog",id:d.contentId,"aria-describedby":d.descriptionId,"aria-labelledby":d.titleId,"data-state":yt(d.open),...i,ref:m,onDismiss:()=>d.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(La,{titleId:d.titleId}),e.jsx(Wa,{contentRef:l,descriptionId:d.descriptionId})]})]})}),xt="DialogTitle",Qt=a.forwardRef((t,n)=>{const{__scopeDialog:s,...c}=t,r=ue(xt,s);return e.jsx(Pe.h2,{id:r.titleId,...c,ref:n})});Qt.displayName=xt;var en="DialogDescription",tn=a.forwardRef((t,n)=>{const{__scopeDialog:s,...c}=t,r=ue(en,s);return e.jsx(Pe.p,{id:r.descriptionId,...c,ref:n})});tn.displayName=en;var nn="DialogClose",sn=a.forwardRef((t,n)=>{const{__scopeDialog:s,...c}=t,r=ue(nn,s);return e.jsx(Pe.button,{type:"button",...c,ref:n,onClick:be(t.onClick,()=>r.onOpenChange(!1))})});sn.displayName=nn;function yt(t){return t?"open":"closed"}var rn="DialogTitleWarning",[Ba,an]=Fn(rn,{contentName:je,titleName:xt,docsSlug:"dialog"}),La=({titleId:t})=>{const n=an(rn),s=`\`${n.contentName}\` requires a \`${n.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${n.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${n.docsSlug}`;return a.useEffect(()=>{t&&(document.getElementById(t)||console.error(s))},[s,t]),null},Oa="DialogDescriptionWarning",Wa=({contentRef:t,descriptionId:n})=>{const c=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${an(Oa).contentName}}.`;return a.useEffect(()=>{var o;const r=(o=t.current)==null?void 0:o.getAttribute("aria-describedby");n&&r&&(document.getElementById(n)||console.warn(c))},[c,t,n]),null},Ia=qt,Ga=Ut,Fa=Jt,Ha=Yt,za=Zt,qa=Qt,Va=tn,on=sn,cn="AlertDialog",[Ua,ti]=At(cn,[zt]),fe=zt(),ln=t=>{const{__scopeAlertDialog:n,...s}=t,c=fe(n);return e.jsx(Ia,{...c,...s,modal:!0})};ln.displayName=cn;var Ka="AlertDialogTrigger",dn=a.forwardRef((t,n)=>{const{__scopeAlertDialog:s,...c}=t,r=fe(s);return e.jsx(Ga,{...r,...c,ref:n})});dn.displayName=Ka;var Ja="AlertDialogPortal",un=t=>{const{__scopeAlertDialog:n,...s}=t,c=fe(n);return e.jsx(Fa,{...c,...s})};un.displayName=Ja;var Ya="AlertDialogOverlay",mn=a.forwardRef((t,n)=>{const{__scopeAlertDialog:s,...c}=t,r=fe(s);return e.jsx(Ha,{...r,...c,ref:n})});mn.displayName=Ya;var ke="AlertDialogContent",[Za,Xa]=Ua(ke),pn=a.forwardRef((t,n)=>{const{__scopeAlertDialog:s,children:c,...r}=t,o=fe(s),i=a.useRef(null),d=Ae(n,i),l=a.useRef(null);return e.jsx(Ba,{contentName:ke,titleName:_n,docsSlug:"alert-dialog",children:e.jsx(Za,{scope:s,cancelRef:l,children:e.jsxs(za,{role:"alertdialog",...o,...r,ref:d,onOpenAutoFocus:be(r.onOpenAutoFocus,m=>{var f;m.preventDefault(),(f=l.current)==null||f.focus({preventScroll:!0})}),onPointerDownOutside:m=>m.preventDefault(),onInteractOutside:m=>m.preventDefault(),children:[e.jsx(Yn,{children:c}),e.jsx(eo,{contentRef:i})]})})})});pn.displayName=ke;var _n="AlertDialogTitle",fn=a.forwardRef((t,n)=>{const{__scopeAlertDialog:s,...c}=t,r=fe(s);return e.jsx(qa,{...r,...c,ref:n})});fn.displayName=_n;var hn="AlertDialogDescription",gn=a.forwardRef((t,n)=>{const{__scopeAlertDialog:s,...c}=t,r=fe(s);return e.jsx(Va,{...r,...c,ref:n})});gn.displayName=hn;var Qa="AlertDialogAction",xn=a.forwardRef((t,n)=>{const{__scopeAlertDialog:s,...c}=t,r=fe(s);return e.jsx(on,{...r,...c,ref:n})});xn.displayName=Qa;var yn="AlertDialogCancel",vn=a.forwardRef((t,n)=>{const{__scopeAlertDialog:s,...c}=t,{cancelRef:r}=Xa(yn,s),o=fe(s),i=Ae(n,r);return e.jsx(on,{...o,...c,ref:i})});vn.displayName=yn;var eo=({contentRef:t})=>{const n=`\`${ke}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${ke}\` by passing a \`${hn}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${ke}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return a.useEffect(()=>{var c;document.getElementById((c=t.current)==null?void 0:c.getAttribute("aria-describedby"))||console.warn(n)},[n,t]),null},to=ln,no=dn,so=un,jn=mn,wn=pn,Nn=xn,Sn=vn,bn=fn,kn=gn;function Cn(t){var n,s,c="";if(typeof t=="string"||typeof t=="number")c+=t;else if(typeof t=="object")if(Array.isArray(t))for(n=0;n<t.length;n++)t[n]&&(s=Cn(t[n]))&&(c&&(c+=" "),c+=s);else for(n in t)t[n]&&(c&&(c+=" "),c+=n);return c}function ro(){for(var t,n,s=0,c="";s<arguments.length;)(t=arguments[s++])&&(n=Cn(t))&&(c&&(c+=" "),c+=n);return c}const bt=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,kt=ro,ao=(t,n)=>s=>{var c;if((n==null?void 0:n.variants)==null)return kt(t,s==null?void 0:s.class,s==null?void 0:s.className);const{variants:r,defaultVariants:o}=n,i=Object.keys(r).map(m=>{const f=s==null?void 0:s[m],x=o==null?void 0:o[m];if(f===null)return null;const j=bt(f)||bt(x);return r[m][j]}),d=s&&Object.entries(s).reduce((m,f)=>{let[x,j]=f;return j===void 0||(m[x]=j),m},{}),l=n==null||(c=n.compoundVariants)===null||c===void 0?void 0:c.reduce((m,f)=>{let{class:x,className:j,...b}=f;return Object.entries(b).every(I=>{let[w,G]=I;return Array.isArray(G)?G.includes({...o,...d}[w]):{...o,...d}[w]===G})?[...m,x,j]:m},[]);return kt(t,i,l,s==null?void 0:s.class,s==null?void 0:s.className)},vt=ao("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),oo=a.forwardRef(({className:t,variant:n,size:s,asChild:c=!1,...r},o)=>{const i=c?Pt:"button";return e.jsx(i,{className:_e(vt({variant:n,size:s,className:t})),ref:o,...r})});oo.displayName="Button";const co=to,lo=no,io=so,$n=a.forwardRef(({className:t,...n},s)=>e.jsx(jn,{className:_e("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...n,ref:s}));$n.displayName=jn.displayName;const Dn=a.forwardRef(({className:t,...n},s)=>e.jsxs(io,{children:[e.jsx($n,{}),e.jsx(wn,{ref:s,className:_e("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n})]}));Dn.displayName=wn.displayName;const Tn=({className:t,...n})=>e.jsx("div",{className:_e("flex flex-col space-y-2 text-center sm:text-left",t),...n});Tn.displayName="AlertDialogHeader";const Rn=({className:t,...n})=>e.jsx("div",{className:_e("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...n});Rn.displayName="AlertDialogFooter";const Mn=a.forwardRef(({className:t,...n},s)=>e.jsx(bn,{ref:s,className:_e("text-lg font-semibold",t),...n}));Mn.displayName=bn.displayName;const An=a.forwardRef(({className:t,...n},s)=>e.jsx(kn,{ref:s,className:_e("text-sm text-muted-foreground",t),...n}));An.displayName=kn.displayName;const Pn=a.forwardRef(({className:t,...n},s)=>e.jsx(Nn,{ref:s,className:_e(vt(),t),...n}));Pn.displayName=Nn.displayName;const En=a.forwardRef(({className:t,...n},s)=>e.jsx(Sn,{ref:s,className:_e(vt({variant:"outline"}),"mt-2 sm:mt-0",t),...n}));En.displayName=Sn.displayName;const uo=({onLeaveTournament:t})=>{const[n,s]=a.useState(!1),{t:c}=te(),r=()=>{t()};return e.jsxs(co,{children:[e.jsx(lo,{asChild:!0,children:e.jsxs("button",{className:`
            flex items-center gap-2 px-4 py-2
            bg-gradient-to-r from-red-500 to-red-600
            hover:from-red-600 hover:to-red-700
            text-white rounded-lg shadow-lg
            transition-all duration-300 ease-in-out
            transform ${n?"scale-105":"scale-100"}
            hover:shadow-red-500/25 hover:shadow-xl
            font-medium
          `,onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),children:[e.jsx(Qn,{className:`transition-transform duration-300 ${n?"translate-x-1":""}`,size:20}),c("game.remoteTournament.leaveTournamentButton.leaveTournament")]})}),e.jsxs(Dn,{className:"bg-gray-900 border-gray-800",children:[e.jsxs(Tn,{children:[e.jsx(Mn,{className:"text-red-500",children:c("game.remoteTournament.leaveTournamentButton.leaveConfirmationTitle")}),e.jsx(An,{className:"text-gray-400",children:c("game.remoteTournament.leaveTournamentButton.leaveConfirmationDescription")})]}),e.jsxs(Rn,{children:[e.jsx(En,{className:"bg-gray-800 text-white hover:bg-gray-700 border-gray-700",children:c("game.remoteTournament.leaveTournamentButton.stayButton")}),e.jsx(Pn,{className:"bg-red-500 hover:bg-red-600 text-white border-0",onClick:r,children:c("game.remoteTournament.leaveTournamentButton.leaveButton")})]})]})]})},rt=({currentUser:t,handleReady:n,handleCancel:s,winnerOfMatch1:c=null,winnerOfMatch2:r=null,opponentReady:o,isReady:i,setIsReady:d,match:l})=>e.jsxs("div",{className:$.matchup,children:[e.jsxs("div",{className:$.participants,children:[e.jsxs("div",{className:`${$.participant} ${l!=null&&l.winner&&(l==null?void 0:l.winner)===(l==null?void 0:l.player1)?$==null?void 0:$.winner:""}`,children:[e.jsx("span",{children:(l==null?void 0:l.player1)||c||"TBD"}),t===(l==null?void 0:l.player1)&&!(l!=null&&l.winner)&&(i?e.jsx(Ne,{checked:!0}):e.jsx(Ne,{})),t===(l==null?void 0:l.player2)&&!(l!=null&&l.winner)&&(o?e.jsx(Ne,{checked:!0}):e.jsx(Ne,{}))]}),e.jsxs("div",{className:`${$.participant} ${l!=null&&l.winner&&(l==null?void 0:l.winner)===(l==null?void 0:l.player2)?$==null?void 0:$.winner:""}`,children:[e.jsx("span",{children:(l==null?void 0:l.player2)||r||"TBD"}),t===(l==null?void 0:l.player2)&&!(l!=null&&l.winner)&&e.jsx(Ne,{checked:i||!1}),t===(l==null?void 0:l.player1)&&!(l!=null&&l.winner)&&e.jsx(Ne,{checked:o||!1})]})]}),(t===(l==null?void 0:l.player1)||t===(l==null?void 0:l.player2))&&(l==null?void 0:l.status)=="waiting"&&e.jsx(Ta,{isReady:i,setIsReady:d,handleCancel:s,handleReady:n})]}),mo=()=>e.jsxs("div",{className:$.connector,children:[e.jsx("div",{className:$.merger}),e.jsx("div",{className:$.line})]}),po=({tournamentStat:t,user:n,matchStarted:s,matchAddress:c,setMatchStarted:r,sendMessage:o,onReturn:i,opponentReady:d,setOpponentReady:l,p1_id:m,p2_id:f})=>{var _,M;const[x,j]=a.useState(t.rounds),[b,I]=a.useState((_=x[1][0])==null?void 0:_.winner),[w,G]=a.useState((M=x[1][1])==null?void 0:M.winner),[Q,H]=a.useState(!1),[q,T]=a.useState(!1),{t:S}=te(),U=v=>{switch(v){case"waiting":return S("game.joinedTournaments.statusGame.waiting");case"ongoing":return S("game.joinedTournaments.statusGame.ongoing");case"ended":return S("game.joinedTournaments.statusGame.ended");case"aborted":return S("game.joinedTournaments.statusGame.aborted");default:return S("game.joinedTournaments.statusGame.unknown")}};a.useEffect(()=>{var v,se;j(t.rounds),I((v=t.rounds[1][0])==null?void 0:v.winner),G((se=t.rounds[1][1])==null?void 0:se.winner),t.winner&&H(!0);for(const A in t.rounds)for(const C of t.rounds[A])(C.player1===n||C.player2===n)&&(C.player1===n&&l(C.player2_ready),C.player2===n&&l(C.player1_ready))},[t]),a.useEffect(()=>()=>{o({event:"player_unready"})},[]);const K=v=>{o({event:"player_ready",match_id:v})},k=v=>{o({event:"player_unready",match_id:v})},R=()=>{r(!1),T(!1),l(!1)};return s&&c?e.jsx(e.Fragment,{children:e.jsx(it,{isMatchTournament:!0,onReturn:R,game_address:c,p1_id:m,p2_id:f})}):e.jsxs("div",{className:$.container,children:[t.status!="ended"&&e.jsx(uo,{onLeaveTournament:()=>{o({event:"player_left"}),i()}}),e.jsxs("div",{className:$.tournamentBody,children:[e.jsx(Gt,{}),e.jsxs("div",{className:$.bracket,children:[e.jsx("section",{className:`${$.round} ${$.quarterfinals}`,children:e.jsxs("div",{className:$.winners,children:[e.jsxs("div",{className:$.matchups,children:[e.jsx(rt,{match:x[1][0],currentUser:n,handleReady:()=>K(x[1][0].match_id),handleCancel:()=>k(x[1][0].match_id),opponentReady:d,isReady:q,setIsReady:T}),e.jsx(rt,{match:x[1][1],currentUser:n,handleReady:()=>K(x[1][1].match_id),handleCancel:()=>k(x[1][1].match_id),opponentReady:d,isReady:q,setIsReady:T})]}),e.jsx(mo,{})]})}),e.jsx("section",{className:`${$.round} ${$.finals}`,children:e.jsx("div",{className:$.winners,children:e.jsx("div",{className:$.matchups,children:e.jsx(rt,{winnerOfMatch1:b,winnerOfMatch2:w,match:x[2][0],currentUser:n,handleReady:()=>K(x[2][0].match_id),handleCancel:()=>k(x[2][0].match_id),opponentReady:d,isReady:q,setIsReady:T})})})})]})]}),e.jsxs("ul",{className:$.infoList,children:[e.jsxs("li",{className:$.item,children:[e.jsx("div",{className:$.itemLabel,children:S("game.remoteTournament.playerReady.Players")}),e.jsxs("div",{className:$.text,children:[t.players.length,"/4"]})]}),e.jsxs("li",{className:$.item,children:[e.jsx("div",{className:$.itemLabel,children:S("game.remoteTournament.playerReady.Format")}),e.jsx("div",{className:$.text,children:S("game.remoteTournament.playerReady.SingleElimination")})]}),e.jsxs("li",{className:$.item,children:[e.jsx("div",{className:$.itemLabel,children:S("game.remoteTournament.playerReady.Status")}),e.jsx("div",{className:$.text,children:U(t.status)})]}),e.jsxs("li",{className:$.item,children:[e.jsx("div",{className:$.itemLabel,children:S("game.remoteTournament.playerReady.Created")}),e.jsx("div",{className:$.text,children:pt(t.created_at,S("lang"))})]})]}),Q&&e.jsx(Ft,{winner:t==null?void 0:t.winner,setShowWinner:H}),e.jsx(Ye,{onClick:()=>{T(!1),o({event:"player_unready"}),i()}})]})},_o="_modalOverlay_1on4t_1",fo="_modalContent_1on4t_14",ho="_buttonWrapper_1on4t_36",go="_submitButton_1on4t_54",xo="_toastStyle_1on4t_58",yo="_label_1on4t_62",vo="_input_1on4t_70",$e={modalOverlay:_o,modalContent:fo,buttonWrapper:ho,submitButton:go,toastStyle:xo,label:yo,input:vo},jo=({isOpen:t,onClose:n,onSubmit:s})=>{const[c,r]=a.useState(""),{t:o}=te(),i=a.useRef(null),d=a.useRef(null);a.useEffect(()=>{var x;(x=i.current)==null||x.focus()},[t]),a.useEffect(()=>{const x=j=>{d.current&&j.target instanceof Node&&!d.current.contains(j.target)&&n()};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[n]);const l=x=>{r(x.target.value)},m=x=>{x.key==="Enter"&&document.activeElement===i.current&&f()},f=()=>{c.trim()?(s(c),r(""),n()):Me.warn(o("game.remoteTournament.CreateTournamentModal.AlertMessage"))};return t?e.jsx("div",{className:$e.modalOverlay,children:e.jsxs("div",{ref:d,className:$e.modalContent,children:[e.jsx("label",{className:$e.label,children:o("game.remoteTournament.CreateTournamentModal.Label")}),e.jsx("input",{ref:i,type:"text",placeholder:o("game.remoteTournament.CreateTournamentModal.InputPlaceholder"),value:c,onChange:l,onKeyDown:m,maxLength:15}),e.jsxs("div",{className:$e.buttonWrapper,children:[e.jsx("button",{className:$e.submitButton,onClick:f,children:o("game.remoteTournament.CreateTournamentModal.SubmitButton")}),e.jsx("button",{onClick:n,children:o("game.remoteTournament.CreateTournamentModal.CancelButton")})]})]})}):null},wo="_container_1p0zy_1",No="_gameArea_1p0zy_18",Ct={container:wo,gameArea:No},So="_gameScreenDiv_4lim3_1",bo="_optionsButton_4lim3_16",$t={gameScreenDiv:So,optionsButton:bo},ko="_closeButton_1nvn5_1",Co={closeButton:ko},$o=({onClose:t})=>e.jsx("button",{className:Co.closeButton,onClick:t,children:"× "}),Do="_scoreButton_1jjtd_1",To="_controllButtons_1jjtd_1",Ro="_scores_1jjtd_21",Mo="_controlls_1jjtd_21",Ao="_title_1jjtd_31",Po="_soundButtonWrapper_1jjtd_36",Eo="_controllerTypeWrapper_1jjtd_36",Bo="_winningScoreWrapper_1jjtd_36",Lo="_optionsButton_1jjtd_52",Oo="_soundButton_1jjtd_36",Wo="_soundButtonLabel_1jjtd_65",Io="_soundOn_1jjtd_72",Go="_on_1jjtd_72",Fo="_soundOff_1jjtd_79",Ho="_off_1jjtd_79",W={scoreButton:Do,controllButtons:To,scores:Ro,controlls:Mo,title:Ao,soundButtonWrapper:Po,controllerTypeWrapper:Eo,winningScoreWrapper:Bo,optionsButton:Lo,soundButton:Oo,soundButtonLabel:Wo,soundOn:Io,on:Go,soundOff:Fo,off:Ho},zo=({onClose:t,sound:n,SwitchSound:s,setController:c,setWinningScore:r,controller:o,winningScore:i})=>{const{t:d}=te();return e.jsxs("div",{className:W.gameScreenDiv,children:[e.jsx($o,{onClose:t}),e.jsxs("div",{className:W.soundButtonWrapper,children:[e.jsx("button",{style:n?{backgroundColor:"darkgray"}:{backgroundColor:"transparent"},id:"soundButton",className:`${W.soundButton} ${n?W.soundOn:W.soundOff}`,onClick:()=>{s(l=>!l)},"aria-label":"Toggle Sound"}),e.jsx("label",{htmlFor:"soundButton",className:W.soundButtonLabel,children:d("game.localGame.OptionsScreen.Sound")})]}),e.jsxs("div",{className:W.winningScoreWrapper,children:[e.jsx("p",{className:W.title,children:d("game.localGame.OptionsScreen.SetWinningScore")}),e.jsxs("div",{className:W.scores,children:[e.jsx(de,{className:`${i===7?W.on:W.off} ${W.scoreButton}`,onClick:()=>{r(7)},children:"7"}),e.jsx(de,{className:`${i===11?W.on:W.off} ${W.scoreButton}`,onClick:()=>{r(11)},children:"11"}),e.jsx(de,{className:`${i===21?W.on:W.off} ${W.scoreButton}`,onClick:()=>{r(21)},children:"21"})]})]}),e.jsxs("div",{className:W.controllerTypeWrapper,children:[e.jsx("p",{className:W.title,children:d("game.localGame.OptionsScreen.SetControllerType")}),e.jsxs("div",{className:W.controlls,children:[e.jsx(de,{className:`${W.controllButtons} ${o==="mouse"?W.on:W.off}`,onClick:()=>c("mouse"),children:d("game.localGame.OptionsScreen.ControllerOptions.Mouse")}),e.jsx(de,{className:`${W.controllButtons} ${o==="keyboard"?W.on:W.off}`,onClick:()=>c("keyboard"),children:d("game.localGame.OptionsScreen.ControllerOptions.Keyboard")})]})]})]})},qo=({onNext:t,SetIsOnePlayerMode:n,SwitchSound:s,sound:c,setController:r,setWinningScore:o,controller:i,winningScore:d})=>{const[l,m]=a.useState(!1),{t:f}=te(),x=()=>m(!1);return l?e.jsx(zo,{onClose:x,sound:c,SwitchSound:s,setController:r,setWinningScore:o,controller:i,winningScore:d}):e.jsxs("div",{id:"gameModeScreen",className:$t.gameScreenDiv,children:[e.jsx(de,{onClick:()=>{t("difficulty"),n(!0)},children:f("game.localGame.onePlayer")}),e.jsx(de,{onClick:()=>{t("difficulty"),n(!1)},children:f("game.localGame.twoPlayer")}),e.jsx("div",{id:"optionsButton",className:$t.optionsButton,onClick:()=>m(j=>!j),children:e.jsx("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M11 15.7881C8.35601 15.7881 6.21257 13.6448 6.21257 10.9992C6.21257 8.35526 8.35601 6.21186 11 6.21186C13.644 6.21186 15.7874 8.35526 15.7874 10.9992C15.7874 13.6448 13.644 15.7881 11 15.7881ZM20.5038 8.51938H18.9049C18.7572 8.04837 18.5647 7.59868 18.339 7.16705L19.4732 6.033C20.0576 5.44874 20.0576 4.50014 19.4734 3.91588L18.083 2.52578C17.4986 1.94152 16.5514 1.94152 15.9671 2.52578L14.8328 3.65983C14.4018 3.43499 13.9507 3.24297 13.4792 3.09362V1.49514C13.4792 0.669626 12.8093 0 11.983 0H10.0168C9.19051 0 8.52061 0.669626 8.52061 1.49514V3.09362C8.04929 3.24297 7.59815 3.43499 7.1672 3.65983L6.03286 2.52578C5.44863 1.94152 4.50138 1.94152 3.91698 2.52578L2.52664 3.91588C1.94241 4.50014 1.94241 5.44874 2.52681 6.033L3.66098 7.16705C3.43533 7.59868 3.24283 8.04837 3.09513 8.51938H1.49619C0.669898 8.51938 0 9.19061 0 10.0161V11.9823C0 12.8094 0.669898 13.479 1.49619 13.479H3.09513C3.24283 13.95 3.43533 14.4014 3.66098 14.833L2.52681 15.967C1.94241 16.5513 1.94241 17.4983 2.52664 18.0825L3.91698 19.4726C4.50138 20.0585 5.44863 20.0585 6.03286 19.4726L7.1672 18.3385C7.59815 18.565 8.04929 18.757 8.52061 18.9047V20.5033C8.52061 21.3304 9.19051 22 10.0168 22H11.983C12.8093 22 13.4792 21.3304 13.4792 20.5033V18.9047C13.9507 18.757 14.4018 18.565 14.8328 18.3385L15.9671 19.4726C16.5514 20.0585 17.4986 20.0585 18.083 19.4726L19.4734 18.0825C20.0576 17.4983 20.0576 16.5513 19.4732 15.967L18.339 14.833C18.5647 14.4014 18.7572 13.95 18.9049 13.479H20.5038C21.3301 13.479 22 12.8094 22 11.9823V10.0161C22 9.19061 21.3301 8.51938 20.5038 8.51938Z",fill:"#F2F2F2"})})})]})};class Ue{constructor(n,s,c,r,o){ae(this,"x");ae(this,"y");ae(this,"width");ae(this,"height");ae(this,"speed");ae(this,"dy",0);ae(this,"score",0);ae(this,"paddleHitPoint");this.x=n,this.y=s,this.width=c,this.height=r,this.speed=o,this.paddleHitPoint=this.height/4}moveUp(){this.dy=-this.speed}moveDown(){this.dy=this.speed}stop(){this.dy=0}}class Bn{constructor(n,s,c,r,o){ae(this,"x");ae(this,"y");ae(this,"radius");ae(this,"angle");ae(this,"dx");ae(this,"dy");ae(this,"speed");const i=Math.random()<.5?1:-1;this.x=n,this.y=s,this.radius=c,this.angle=o,this.dx=i*r*Math.cos(this.angle),this.dy=r*Math.sin(this.angle),this.speed=r}move(){this.x+=this.dx,this.y+=this.dy}}function Fe(t,n,s,c,r,o,i,d){const l=(t-s)*(o-d)-(n-c)*(r-i);if(l===0)return!1;const m=((t-r)*(o-d)-(n-o)*(r-i))/l,f=-((t-s)*(n-o)-(n-c)*(t-r))/l;return m>=0&&m<=1&&f>=0&&f<=1}function Ke(t,n){const s=t.y<n.y,c=t.y>n.y+n.height,r=t.x+t.dx+(t.dx>0?t.radius:-t.radius),o=(s?t.y+t.radius:c?t.y-t.radius:t.y)+t.dy,i=n.x,d=n.x+n.width,l=n.y,m=n.y+n.height,f=Fe(t.x,t.y,r,o,i,l,i,m),x=Fe(t.x,t.y,r,o,d,l,d,m),j=Fe(t.x,t.y,r,o,i,l,d,l),b=Fe(t.x,t.y,r,o,i,m,d,m);return f||x||j||b}const Je=(t,n)=>{const s=t.x<n.x,c=t.x>n.x+n.width,r=t.y<n.y,o=t.y>n.y+n.height;if(s||c){t.dx*=-1;const i=(t.y-(n.y+n.height/2))/(n.height/2),d=Math.PI/4,l=i*d,m=t.dx>0?1:-1;t.dx=m*t.speed*Math.cos(l),t.dy=t.speed*Math.sin(l)}(r||o)&&(t.dy*=-1)},Vo="_gameCanvas_1s4cd_1",Uo="_score_1s4cd_10",Ko="_gameOverScreen_1s4cd_29",Jo="_gameScreen_1s4cd_51",Yo="_controlModeScreen_1s4cd_1",Zo="_difficultyScreen_1s4cd_1",Xo="_touchButtons_1s4cd_1",Qo="_onePlayerInstructionsDiv_1s4cd_1",ec="_twoPlayersInstructionsDiv_1s4cd_1",tc="_gameScreenDiv_1s4cd_51",nc="_scoreWrapper_1s4cd_66",sc="_player1Score_1s4cd_75",rc="_player2Score_1s4cd_75",ac="_pauseDiv_1s4cd_92",oc="_pauseButton_1s4cd_101",cc="_optionsButton_1s4cd_1",lc="_resetStatsButton_1s4cd_1",ic="_optionsPanel_1s4cd_138",dc="_singleOption_1s4cd_145",uc="_selected_1s4cd_158",ve={gameCanvas:Vo,score:Uo,gameOverScreen:Ko,gameScreen:Jo,controlModeScreen:Yo,difficultyScreen:Zo,touchButtons:Xo,onePlayerInstructionsDiv:Qo,twoPlayersInstructionsDiv:ec,gameScreenDiv:tc,scoreWrapper:nc,player1Score:sc,player2Score:rc,pauseDiv:ac,pauseButton:oc,optionsButton:cc,resetStatsButton:lc,optionsPanel:ic,singleOption:dc,selected:uc},mc=Math.random()*Math.PI/2-Math.PI/4,pc=8,at=20,He=80,_c=({isGameOver:t,setIsGameOver:n,setIsWinner:s,isOnePlayerMode:c,onNext:r,sound:o,paddleSpeed:i,ballSpeed:d,controller:l,winningScore:m,paused:f,setPaused:x})=>{const j=a.useRef(null),[b,I]=a.useState(0),[w,G]=a.useState(0),{t:Q}=te(),H=a.useRef(null),q=a.useRef(null),T=a.useRef(null),S=a.useRef(new Audio("/sounds/wall-hit.mp3")),U=a.useRef(new Audio("/sounds/paddle-hit.mp3"));a.useEffect(()=>{H.current=new Bn(j.current.width/2,j.current.height/2,pc,d,mc),q.current=new Ue(10,j.current.height/2-He/2,at,He,i),T.current=new Ue(j.current.width-10-at,j.current.height/2-He/2,at,He,i)},[]);const K=()=>{x(!f)};return a.useEffect(()=>{S.current.preload="auto",S.current.load(),U.current.preload="auto",U.current.load()},[o]),a.useEffect(()=>{if(t)return;const k=j.current,R=k.getContext("2d"),_=H.current,M=q.current,v=T.current;if(!_||!M||!v)return;function se(p){return Math.floor(Math.random()*(3*p/4-p/4)+p/4)}const A=()=>{_.x=_.dx>0?3*(k.width/4):k.width/4,_.y=k.height/2,_.angle=Math.random()*Math.PI/2-Math.PI/4,_.speed=d;const p=_.dx>0?-1:1;_.dx=p*d*Math.cos(_.angle),_.dy=d*Math.sin(_.angle)},C=(p=!1)=>{p?I(X=>X+1):G(X=>X+1),(p?b+1>=m:w+1>=m)&&(n(!0),s(!!p),r("end")),A()},y=()=>{let p=_.x+_.dx+(_.dx>0?_.radius:-_.radius),X=_.y+_.dy+(_.dy>0?_.radius:-_.radius);(X>=k.height||X<=0)&&(o&&S.current.play(),_.dy*=-1),X<=0?_.y=_.radius:X>=k.height&&(_.y=k.height-_.radius),Ke(_,M)?(o&&U.current.play(),Je(_,M),M.paddleHitPoint=se(M.height)):Ke(_,v)?(o&&U.current.play(),Je(_,v),v.paddleHitPoint=se(v.height)):p>=k.width?C(!0):p<=0&&C(!1)},Z=()=>{R.setLineDash([15,7.1]),R.strokeStyle="#f8f3e3",R.lineWidth=3,R.beginPath(),R.moveTo(k.width/2,10),R.lineTo(k.width/2,k.height-10),R.stroke(),R.setLineDash([])},J=p=>{const X=k.getBoundingClientRect(),re=p.clientY-X.top;l==="mouse"&&re>=M.height/2&&re<=k.height-M.height/2&&(M.y=re-M.height/2)},ne=p=>{(p.key==="w"||p.key==="W")&&(M.dy=-M.speed),(p.key==="s"||p.key==="S")&&(M.dy=M.speed),p.key==="ArrowUp"&&(v.dy=-v.speed),p.key==="ArrowDown"&&(v.dy=v.speed)},Y=p=>{(p.key==="w"||p.key==="s"||p.key==="W"||p.key==="S")&&(M.dy=0),(p.key==="ArrowUp"||p.key==="ArrowDown")&&(v.dy=0)},P=()=>{R.beginPath(),R.fillStyle="#f8f3e3",R.fillRect(_.x-_.radius,_.y-_.radius,_.radius*2,_.radius*2),R.closePath()},E=p=>{R.fillStyle="white",R.fillRect(p.x,p.y,p.width,p.height)},V=p=>{p.y+=p.dy,p.y<0?p.y=0:p.y+p.height>R.canvas.height&&(p.y=R.canvas.height-p.height)},N=()=>{_.dx>0&&(_.y<v.y+v.paddleHitPoint&&(v.y-=v.speed),v.y<=0&&(v.y=0),_.y>v.y+v.paddleHitPoint&&(v.y+=v.speed),v.y+v.height>=R.canvas.height&&(v.y=R.canvas.height-v.height))};let oe;const ce=()=>{t||(f||(R.clearRect(0,0,k.width,k.height),Z(),y(),_.move(),l!=="mouse"&&V(M),c?N():V(v),P(),E(M),E(v)),oe=requestAnimationFrame(ce))};return window.addEventListener("keydown",p=>ne(p)),window.addEventListener("keyup",p=>Y(p)),k.addEventListener("mousemove",p=>J(p)),ce(),()=>{window.removeEventListener("keydown",p=>ne(p)),window.removeEventListener("keyup",p=>Y(p)),k.removeEventListener("mousemove",p=>J(p)),cancelAnimationFrame(oe)}},[t,b,w,f]),e.jsxs("div",{id:"gameScreen",className:ve.gameScreenDiv,children:[e.jsxs("div",{className:ve.scoreWrapper,children:[e.jsx("div",{className:ve.player1Score,children:b}),e.jsx("div",{className:ve.player2Score,children:w})]}),e.jsx("canvas",{width:"650",height:"480",id:ve.gameCanvas,ref:j}),f&&e.jsx("div",{className:ve.pauseDiv,children:Q("game.localGame.paused")}),e.jsx("button",{className:ve.pauseButton,onClick:K,children:f?e.jsx(Et,{color:"black"}):e.jsx(Bt,{color:"black"})})]})},fc="_gameScreenDiv_1l7oz_1",hc="_title_1l7oz_15",Dt={gameScreenDiv:fc,title:hc},gc=({onNext:t,setBallSpeed:n,setPaddleSpeed:s})=>{const{t:c}=te();return e.jsxs("div",{className:Dt.gameScreenDiv,children:[e.jsx("p",{className:Dt.title,children:c("game.localGame.DifficultyScreen.Title")}),e.jsx(de,{onClick:()=>{t("game"),n(4),s(5)},children:c("game.localGame.DifficultyScreen.DifficultyOptions.Easy")}),e.jsx(de,{onClick:()=>{t("game"),n(6),s(8)},children:c("game.localGame.DifficultyScreen.DifficultyOptions.Normal")}),e.jsx(de,{onClick:()=>{t("game"),n(8),s(10)},children:c("game.localGame.DifficultyScreen.DifficultyOptions.Hard")})]})},xc=({paused:t})=>{const[n,s]=a.useState(0);a.useEffect(()=>{if(t)return;const r=setInterval(()=>{s(o=>o+1)},1e3);return()=>clearInterval(r)},[t]);const c=r=>{const o=Math.floor(r/60),i=r%60;return`${o.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`};return e.jsx("div",{className:"font-mono text-2xl",children:c(n)})},yc=({isOnePlayerMode:t,paused:n})=>{const s={player1:{username:t?"You":"Player 1",avatar:"/assets/frieren.png"},player2:{username:t?"Computer":"Player 2",avatar:"/assets/fern.png"}};return e.jsxs("div",{className:"ml-auto mr-auto w-[662px] bg-gray-900 text-white py-4 px-5 flex items-center justify-between border rounded-full border-red-500",children:[e.jsxs("div",{className:"flex items-center gap-3 space-x-3",children:[e.jsx("div",{className:"w-16 h-16 rounded-full border-2 border-green-500 overflow-hidden",children:e.jsx("img",{src:s.player1.avatar,alt:s.player1.username,className:"w-full h-full object-cover"})}),e.jsx("div",{className:"flex flex-col",children:e.jsx("span",{className:"font-semibold text-lg",children:s.player1.username})})]}),e.jsxs("div",{className:"flex items-center justify-center flex-col gap-1",children:[e.jsx(mt,{className:"text-red-500/50 animate-pulse",size:24}),e.jsx(xc,{paused:n})]}),e.jsxs("div",{className:"flex items-center gap-3 space-x-3 flex-row-reverse text-right",children:[e.jsx("div",{className:"w-16 h-16 rounded-full border-2 border-red-500 overflow-hidden",children:e.jsx("img",{src:s.player2.avatar,alt:s.player2.username,className:"w-full h-full object-cover"})}),e.jsx("div",{className:"flex flex-col items-end",children:e.jsx("span",{className:"font-semibold text-lg",children:s.player2.username})})]})]})},vc=({onReturn:t})=>{const[n,s]=a.useState("mode"),[c,r]=a.useState(!1),[o,i]=a.useState(!1),[d,l]=a.useState(!1),[m,f]=a.useState(5),[x,j]=a.useState(10),[b,I]=a.useState(!0),[w,G]=a.useState("mouse"),[Q,H]=a.useState(7),[q,T]=a.useState(!1),S=k=>{s(k)},U=()=>{s("game"),r(!1)},K=()=>{s("mode"),r(!1)};return e.jsxs("div",{className:Ct.container,children:[n==="game"&&e.jsx(yc,{isOnePlayerMode:d,paused:q}),e.jsxs("div",{className:Ct.gameArea,children:[n==="mode"&&e.jsx(qo,{onNext:S,SetIsOnePlayerMode:l,SwitchSound:I,sound:b,setController:G,setWinningScore:H,controller:w,winningScore:Q}),n==="difficulty"&&e.jsx(gc,{onNext:S,setBallSpeed:f,setPaddleSpeed:j}),n==="game"&&e.jsx(_c,{onNext:S,isGameOver:c,setIsGameOver:r,setIsWinner:i,isOnePlayerMode:d,sound:b,ballSpeed:m,paddleSpeed:x,controller:w,winningScore:Q,paused:q,setPaused:T}),n==="end"&&e.jsx(ft,{isWinner:o,handleRetry:U,handleMainMenu:K,isLocalGame:!0,isOnePlayerMode:d})]}),e.jsx(Ye,{onClick:t})]})},jc="_container_cap5r_2",wc="_bracket_cap5r_18",Nc="_round_cap5r_25",Sc="_winners_cap5r_30",bc="_matchups_cap5r_35",kc="_matchup_cap5r_35",Cc="_participants_cap5r_39",$c="_participant_cap5r_39",Dc="_winner_cap5r_30",Tc="_loser_cap5r_62",Rc="_connector_cap5r_74",Mc="_filled_cap5r_74",Ac="_line_cap5r_74",Pc="_bottom_cap5r_75",Ec="_merger_cap5r_75",Bc="_top_cap5r_76",Lc="_quarterfinals_cap5r_120",Oc="_finals_cap5r_129",Wc="_playButton_cap5r_137",Ic="_button_cap5r_159",Gc="_verticalText_cap5r_166",Fc="_tournamentBody_cap5r_169",Hc="_gameCanvas_cap5r_1",zc="_canvasDiv_cap5r_191",qc="_score_cap5r_197",Vc="_gameScreenDiv_cap5r_212",Uc="_scoreWrapper_cap5r_228",Kc="_player1Score_cap5r_237",Jc="_player2Score_cap5r_237",Yc="_form_cap5r_256",Zc="_title_cap5r_268",Xc="_inputContainer_cap5r_275",Qc="_label_cap5r_279",el="_input_cap5r_275",tl="_playerNamesWrapper_cap5r_323",nl="_player1_cap5r_237",sl="_player2_cap5r_237",rl="_vsDiv_cap5r_344",al="_pauseDiv_cap5r_351",ol="_pauseButton_cap5r_360",cl="_gameOverlay_cap5r_374",ll="_gameOverlayContent_cap5r_391",D={container:jc,bracket:wc,round:Nc,winners:Sc,matchups:bc,matchup:kc,participants:Cc,participant:$c,winner:Dc,loser:Tc,connector:Rc,filled:Mc,line:Ac,bottom:Pc,merger:Ec,top:Bc,quarterfinals:Lc,finals:Oc,playButton:Wc,button:Ic,verticalText:Gc,tournamentBody:Fc,gameCanvas:Hc,canvasDiv:zc,score:qc,gameScreenDiv:Vc,scoreWrapper:Uc,player1Score:Kc,player2Score:Jc,form:Yc,title:Zc,inputContainer:Xc,label:Qc,input:el,playerNamesWrapper:tl,player1:nl,player2:sl,vsDiv:rl,pauseDiv:al,pauseButton:ol,gameOverlay:cl,gameOverlayContent:ll},il="_container_2ikhr_1",dl="_heading_2ikhr_10",ul="_input_2ikhr_14",ml="_addButton_2ikhr_21",pl="_errorMessage_2ikhr_29",_l="_playerList_2ikhr_33",fl="_playerItem_2ikhr_38",hl="_removeButton_2ikhr_44",gl="_startButton_2ikhr_54",xl="_enabled_2ikhr_63",yl="_disabled_2ikhr_71",vl="_label_2ikhr_76",ie={container:il,heading:dl,input:ul,addButton:ml,errorMessage:pl,playerList:_l,playerItem:fl,removeButton:hl,startButton:gl,enabled:xl,disabled:yl,label:vl},jl=({onSubmit:t,players:n,setPlayers:s})=>{const[c,r]=a.useState(""),{t:o}=te(),[i,d]=a.useState(""),l=a.useRef(null);a.useEffect(()=>{var b;(b=l.current)==null||b.focus()},[c]);const m=b=>{b.key==="Enter"&&document.activeElement===l.current&&f()},f=()=>{if(!c.trim()){d(o("game.localTournament.TournamentForm.ErrorMessages.EmptyPlayer"));return}if(n.includes(c)){d(o("game.localTournament.TournamentForm.ErrorMessages.DuplicatePlayer"));return}n.length<4&&(s([...n,c.trim()]),r(""),d(""))},x=b=>{const I=n.filter((w,G)=>G!==b);s(I)},j=b=>{b.preventDefault(),n.length===4&&t(n)};return e.jsxs("div",{className:ie.container,children:[e.jsx("h2",{className:`${ie.heading} ${ie.label}`,children:o("game.localTournament.TournamentForm.Title")}),e.jsx("input",{disabled:n.length===4,ref:l,type:"text",value:c,onChange:b=>r(b.target.value),onKeyDown:m,placeholder:o("game.localTournament.TournamentForm.InputPlaceholder"),maxLength:15,className:ie.input}),e.jsx("button",{onClick:f,disabled:!c||n.length>=4,className:ie.addButton,children:o("game.localTournament.TournamentForm.AddPlayerButton")}),i&&e.jsx("p",{className:ie.errorMessage,children:i}),e.jsx("ul",{className:ie.playerList,children:n.map((b,I)=>e.jsxs("li",{className:ie.playerItem,children:[b,e.jsx("button",{onClick:()=>x(I),className:ie.removeButton,children:"✖"})]},I))}),e.jsx("button",{onClick:j,disabled:n.length!==4,className:`${ie.startButton} ${n.length===4?ie.enabled:ie.disabled}`,children:o("game.localTournament.TournamentForm.StartTournamentButton")})]})},wl=Math.random()*Math.PI/2-Math.PI/4,Nl=8,ot=20,ze=80;function Sl({onClick:t}){return e.jsx("button",{onClick:t,className:`${D.playButton}`,children:"start"})}const ct=({matchNumber:t,player1:n,player2:s,winner:c,activeMatch:r,onClick:o})=>e.jsxs("div",{className:D.matchup,children:[e.jsxs("div",{className:D.participants,children:[e.jsx("div",{className:`${D.participant} ${c===1?D.winner:""}`,children:e.jsx("span",{children:n})}),e.jsx("div",{className:`${D.participant} ${c===2?D.winner:""}`,children:e.jsx("span",{children:s})})]}),t===r&&e.jsx(Sl,{onClick:o}),e.jsx("div",{})]}),bl=()=>e.jsxs("div",{className:D.connector,children:[e.jsx("div",{className:D.merger}),e.jsx("div",{className:D.line})]}),kl=({roundIndex:t,matchIndex:n,updateWinner:s,sound:c=!0,paddleSpeed:r=5,ballSpeed:o=3,winningScore:i=7,player1:d="player 1",player2:l="player 2"})=>{const m=a.useRef(null),[f,x]=a.useState(0),[j,b]=a.useState(0),[I,w]=a.useState(!1),[G,Q]=a.useState(!1),[H,q]=a.useState(!1),[T,S]=a.useState(null),{t:U}=te(),K=a.useRef(null),k=a.useRef(null),R=a.useRef(null),_=a.useRef(new Audio("/sounds/wall-hit.mp3")),M=a.useRef(new Audio("/sounds/paddle-hit.mp3"));a.useEffect(()=>{K.current=new Bn(m.current.width/2,m.current.height/2,Nl,o,wl),k.current=new Ue(10,m.current.height/2-ze/2,ot,ze,r),R.current=new Ue(m.current.width-10-ot,m.current.height/2-ze/2,ot,ze,r)},[]),a.useEffect(()=>{_.current.preload="auto",_.current.load(),M.current.preload="auto",M.current.load()},[c]),a.useEffect(()=>{if(G)return;const A=m.current,C=A.getContext("2d"),y=K.current,Z=k.current,J=R.current;if(!y||!Z||!J)return;const ne=()=>{y.x=y.dx>0?3*(A.width/4):A.width/4,y.y=A.height/2,y.angle=Math.random()*Math.PI/2-Math.PI/4,y.speed=o;const u=y.dx>0?-1:1;y.dx=u*o*Math.cos(y.angle),y.dy=o*Math.sin(y.angle)},Y=u=>{u===1?(x(F=>F+1),f+1>=i&&(Q(!0),s(t,n,1))):(b(F=>F+1),j+1>=i&&(Q(!0),s(t,n,2))),ne()},P=()=>{let u=y.x+y.dx+(y.dx>0?y.radius:-y.radius),F=y.y+y.dy+(y.dy>0?y.radius:-y.radius);(F>=A.height||F<=0)&&(_.current.paused&&c&&_.current.play(),y.dy*=-1),F<=0?y.y=y.radius:F>=A.height&&(y.y=A.height-y.radius),Ke(y,Z)?(M.current.paused&&c&&M.current.play(),Je(y,Z)):Ke(y,J)?(M.current.paused&&c&&M.current.play(),Je(y,J)):u>=A.width?Y(1):u<=0&&Y(2)},E=()=>{C.setLineDash([15,7.1]),C.strokeStyle="#f8f3e3",C.lineWidth=3,C.beginPath(),C.moveTo(A.width/2,10),C.lineTo(A.width/2,A.height-10),C.closePath(),C.stroke(),C.setLineDash([])},V=u=>{(u.key==="w"||u.key==="W")&&(Z.dy=-Z.speed),(u.key==="s"||u.key==="S")&&(Z.dy=Z.speed),u.key==="ArrowUp"&&(J.dy=-J.speed),u.key==="ArrowDown"&&(J.dy=J.speed),u.key===" "&&v()},N=u=>{(u.key==="w"||u.key==="s"||u.key==="W"||u.key==="S")&&(Z.dy=0),(u.key==="ArrowUp"||u.key==="ArrowDown")&&(J.dy=0)},oe=()=>{C.beginPath(),C.fillStyle="#f8f3e3",C.fillRect(y.x-y.radius,y.y-y.radius,y.radius*2,y.radius*2),C.closePath()},ce=u=>{C.fillStyle="white",C.fillRect(u.x,u.y,u.width,u.height)},p=u=>{u.y+=u.dy,u.y<0?u.y=0:u.y+u.height>C.canvas.height&&(u.y=C.canvas.height-u.height)};let X;const re=()=>{G||(I||(C.clearRect(0,0,A.width,A.height),E(),P(),H&&y.move(),p(Z),p(J),oe(),ce(Z),ce(J)),X=requestAnimationFrame(re))};return window.addEventListener("keydown",u=>V(u)),window.addEventListener("keyup",u=>N(u)),re(),()=>{window.removeEventListener("keydown",u=>V(u)),window.removeEventListener("keyup",u=>N(u)),cancelAnimationFrame(X)}},[G,f,j,I,H]);const v=()=>{w(!I)},se=()=>{S(3)};return a.useEffect(()=>{let A;return T!==null&&T>0?A=setTimeout(()=>S(T-1),1e3):T===0&&(S(null),q(!0)),()=>clearTimeout(A)},[T]),e.jsxs("div",{className:D.gameScreenDiv,children:[e.jsxs("div",{className:D.playerNamesWrapper,children:[e.jsx("div",{className:D.player1,children:d}),e.jsx("div",{className:D.vsDiv,children:"VS"}),e.jsx("div",{className:D.player2,children:l})]}),e.jsxs("div",{className:D.canvasDiv,children:[e.jsxs("div",{className:D.scoreWrapper,children:[e.jsx("div",{className:D.player1Score,children:f}),e.jsx("div",{className:D.player2Score,children:j})]}),!H&&T===null&&e.jsx("div",{className:D.gameOverlay,onClick:se,children:e.jsx("div",{className:D.gameOverlayContent,children:e.jsx("h2",{children:U("game.localTournament.pong.ClickToStart")})})}),T!==null&&e.jsx("div",{className:D.gameOverlay,children:e.jsx("div",{className:D.gameOverlayContent,children:e.jsx("h2",{children:T>0?T:"Start!"})})}),e.jsx("canvas",{width:"650",height:"480",id:D.gameCanvas,ref:m})]}),H&&e.jsx("button",{className:D.pauseButton,onClick:v,children:I?e.jsx(Et,{color:"black"}):e.jsx(Bt,{color:"black"})}),H&&I&&e.jsx("div",{className:D.pauseDiv,children:U("game.localTournament.pong.paused")})]})},Cl=({onReturn:t})=>{const[n,s]=a.useState([]),[c,r]=a.useState(1),[o,i]=a.useState(!0),[d,l]=a.useState(!1),[m,f]=a.useState(!1),[x,j]=a.useState(0),[b,I]=a.useState(0),[w,G]=a.useState({1:[{player1:"",player2:"",winner:0},{player1:"",player2:"",winner:0}],2:[{player1:"",player2:"",winner:0}]}),Q=(T,S,U)=>{G(K=>{const k={...K},R=k[T][S];if(R.winner=U,T===1){const _=U===1?R.player1:R.player2;S===0?k[2][0].player1=_:k[2][0].player2=_}return k}),r(K=>K+1),l(!1),c===3&&f(!0)},H=(T,S)=>{j(T),I(S),l(!0)},q=()=>{s(T=>[...T].sort(()=>Math.random()-.5)),G(T=>{let S={...T};return S[1]=[{player1:n[0],player2:n[2],winner:0},{player1:n[1],player2:n[3],winner:0}],S}),i(!1)};return e.jsxs("div",{className:D.container,children:[o&&e.jsx(jl,{onSubmit:q,players:n,setPlayers:s}),!o&&d?e.jsx(kl,{roundIndex:x,matchIndex:b,updateWinner:Q,player1:w[x][b].player1,player2:w[x][b].player2}):!o&&e.jsxs("div",{className:D.tournamentBody,children:[e.jsx(Gt,{}),e.jsxs("div",{className:D.bracket,children:[e.jsx("section",{className:`${D.round} ${D.quarterfinals}`,children:e.jsxs("div",{className:D.winners,children:[e.jsxs("div",{className:D.matchups,children:[e.jsx(ct,{matchNumber:1,player1:w[1][0].player1,player2:w[1][0].player2,winner:w[1][0].winner,activeMatch:c,onClick:()=>H(1,0)}),e.jsx(ct,{matchNumber:2,player1:w[1][1].player1,player2:w[1][1].player2,winner:w[1][1].winner,activeMatch:c,onClick:()=>H(1,1)})]}),e.jsx(bl,{})]})}),e.jsx("section",{className:`${D.round} ${D.finals}`,children:e.jsx("div",{className:D.winners,children:e.jsx("div",{className:D.matchups,children:e.jsx(ct,{matchNumber:3,player1:w[2][0].player1,player2:w[2][0].player2,winner:w[2][0].winner,activeMatch:c,onClick:()=>H(2,0)})})})})]})]}),m&&e.jsx(Ft,{winner:w[2][0].winner===1?w[2][0].player1:w[2][0].player2,setShowWinner:f}),e.jsx(Ye,{onClick:t})]})},$l=({onClick:t})=>{const[n,s]=a.useState(0),[c,r]=a.useState(4),{t:o}=te();a.useEffect(()=>{const l=setInterval(()=>{s(m=>m>=100?0:m+Math.floor(Math.random()*15)),r(Math.floor(Math.random()*5)+1)},1e3);return()=>clearInterval(l)},[]);const i=()=>Array.from({length:5},(l,m)=>e.jsx("div",{className:`h-2 w-4 rounded-sm transition-colors ${m<c?"bg-green-500":"bg-gray-700"}`},m)),{data:d}=Ce("users/online");return e.jsxs("div",{className:"m-auto text-white flex items-center justify-center p-4 overflow-hidden w-[350px]",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-900/30 to-purple-900/30 opacity-50 pointer-events-none"}),e.jsxs("div",{className:"relative z-10 w-full bg-gray-900/70 backdrop-blur-lg rounded-2xl border border-white/10 p-8 shadow-2xl",children:[e.jsx("div",{className:"absolute top-4 right-4 flex space-x-2",children:i()}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(ts,{className:"text-red-500 animate-ping absolute inset-0 opacity-50",size:120}),e.jsx(Xn,{className:"text-red-400 relative z-10",size:120})]})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-red-400 mb-2",children:o("game.remoteGame.matchmakingScreen.matchmakingInProgress")}),e.jsx("p",{className:"text-gray-400",children:o("game.remoteGame.matchmakingScreen.searchingForOpponent")})]}),e.jsx("div",{className:"w-full bg-gray-800 rounded-full h-2.5 mb-4",children:e.jsx("div",{className:"bg-red-500 h-2.5 rounded-full transition-all duration-500",style:{width:`${Math.min(n,100)}%`}})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4 text-center",children:[e.jsx(Lt,{className:"mx-auto mb-2 text-red-400",size:32}),e.jsx("span",{className:"text-xs text-gray-400",children:o("game.remoteGame.matchmakingScreen.playersOnline")}),e.jsx("div",{className:"font-bold text-lg text-red-400",children:(d==null?void 0:d.online_players)||0})]}),e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4 text-center",children:[e.jsx(ss,{className:"mx-auto mb-2 text-yellow-400",size:32}),e.jsx("span",{className:"text-xs text-gray-400",children:o("game.remoteGame.matchmakingScreen.skillMatch")}),e.jsx("div",{className:"font-bold text-lg text-yellow-300",children:o("game.remoteGame.matchmakingScreen.highSkillMatch")})]})]}),e.jsx("button",{onClick:t,className:`w-full py-3 bg-red-600 hover:bg-red-700 rounded-lg
                     transition-colors text-white flex items-center justify-center space-x-2`,children:e.jsx("span",{children:o("game.remoteGame.matchmakingScreen.cancelMatchmaking")})})]}),e.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-20",style:{backgroundImage:"radial-gradient(circle, rgba(8,145,178,0.2) 0%, transparent 70%)",backgroundPosition:"center",backgroundSize:"200% 200%",animation:"pulse 5s infinite alternate"}})]})},Dl="_container_r5kc9_1",Tl="_gameArea_r5kc9_19",Rl="_gameCanvas_r5kc9_1",Ml="_score_r5kc9_60",Al="_gameOverScreen_r5kc9_76",Pl="_gameScreenDiv_r5kc9_86",El="_scoreWrapper_r5kc9_100",Bl="_player1Score_r5kc9_109",Ll="_player2Score_r5kc9_109",Ol="_optionsPanel_r5kc9_127",Wl="_matchmakingLoader_r5kc9_134",Il="_matchmakingLoaderWrapper_r5kc9_138",lt={container:Dl,gameArea:Tl,gameCanvas:Rl,score:Ml,gameOverScreen:Al,gameScreenDiv:Pl,scoreWrapper:El,player1Score:Bl,player2Score:Ll,optionsPanel:Ol,matchmakingLoader:Wl,matchmakingLoaderWrapper:Il},Re=({layout:t="vertical"})=>{const n=t==="vertical";return e.jsx("div",{className:"rounded-lg border border-gray-300 shadow-sm p-2 animate-pulse max-w-xs",children:e.jsxs("div",{className:`flex ${n?"flex-col":"flex-row items-center justify-between"}`,children:[e.jsxs("div",{className:`flex flex-col items-center ${n?"mb-1":"mr-4"}`,children:[e.jsx("div",{className:"mb-1 rounded-full bg-gray-300 w-12 h-12"}),e.jsx("div",{className:"h-4 w-20 bg-gray-300 rounded mt-2"})]}),e.jsxs("div",{className:`
          grid grid-cols-2 gap-1
          ${n?"border-t pt-3 w-full":"border-l pl-4"}
        `,children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"h-3 w-12 bg-gray-300 rounded mx-auto mb-1"}),e.jsx("div",{className:"h-5 w-16 bg-gray-300 rounded mx-auto"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"h-3 w-12 bg-gray-300 rounded mx-auto mb-1"}),e.jsx("div",{className:"h-5 w-16 bg-gray-300 rounded mx-auto"})]})]})]})})},qe=({layout:t="vertical",score:n,against:s,p_id:c})=>{const{t:r}=te(),o=t==="vertical",{data:i,isLoading:d,error:l}=Ce(`users/${c}`);return d||l?e.jsx(Re,{layout:t}):e.jsx("div",{className:" border border-white-500 shadow-sm p-2 max-w-xs",children:e.jsxs("div",{className:`flex ${o?"flex-col":"flex-row items-center justify-between"}`,children:[e.jsxs("div",{className:`flex flex-col items-center ${o?"mb-1":"mr-4"}`,children:[e.jsx("div",{className:"mb-1 rounded-full border-2 border-green-300",children:e.jsx("img",{src:i==null?void 0:i.profile.avatar,alt:"Player avatar",className:"w-12 h-12 rounded-full"})}),e.jsx("h3",{className:"text-base font-medium text-white",children:i==null?void 0:i.username})]}),e.jsxs("div",{className:`
          grid grid-cols-2 gap-1
          ${o?"border-t pt-3 w-full":"border-l pl-4"}
        `,children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:r("game.multipleGame.PlayerCard.Score")}),e.jsx("p",{className:"text-lg font-semibold text-green-300",children:n})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:r("game.multipleGame.PlayerCard.Against")}),e.jsx("p",{className:"text-lg font-semibold text-red-300",children:s})]})]})]})})},De=480,Te=480,Se=15,xe=70,ye=10,Gl=({game_address:t,requestMultipleGame:n=()=>{},onReturn:s,isMatchTournament:c=!1})=>{const r=a.useRef(null),[o,i]=a.useState("started"),[d,l]=a.useState(!1),{t:m}=te(),[f,x]=a.useState("game"),[j,b]=a.useState(!1),[I,w]=a.useState(!1),[G,Q]=a.useState(!0),H=a.useRef(null),[q,T]=a.useState([0,0]),[S,U]=a.useState([0,0]),[K,k]=a.useState([0,0]),[R,_]=a.useState([0,0]),[M,v]=a.useState(null),[se,A]=a.useState(null),[C,y]=a.useState(null),[Z,J]=a.useState(null),ne=a.useRef(Array(4).fill("white")),Y=a.useRef(Array(4).fill(!1)),P=a.useRef(new Audio("/sounds/wall-hit.mp3")),E=a.useRef(new Audio("/sounds/paddle-hit.mp3")),V=a.useRef({x:De/2,y:Te/2,color:"white",radius:8}),N=a.useRef({x:10,y:Te/2-xe/2,w:Se,h:xe,dy:0}),oe=a.useRef({x:De/2-xe/2,y:10,w:xe,h:Se,dy:0}),ce=a.useRef({x:De-Se-10,y:Te/2-xe/2,w:Se,h:xe,dy:0}),p=a.useRef({x:De/2-xe/2,y:Te-Se-10,w:xe,h:Se,dy:0});a.useEffect(()=>{Q(!0),P.current.preload="auto",P.current.load(),E.current.preload="auto",E.current.load()},[]),a.useEffect(()=>{const u=ee=>{var h;ee!=="started"&&(Me.info("Sorry some player didn't make it to the game."),(h=r==null?void 0:r.current)==null||h.close(),re())},F=setTimeout(()=>{u(o)},6e3);return()=>{clearTimeout(F)}},[o]),a.useEffect(()=>{i(null);let u=null;const F=`${ut(`${t}/`)}`;if(r.current||(u=new WebSocket(F)),!!u)return r.current=u,u.onopen=()=>{i("waiting")},u.onmessage=ee=>{const h=JSON.parse(ee.data);h.type==="game_started"&&(N.current.x=h.state.player1_paddle_x,oe.current.y=h.state.player2_paddle_y,ce.current.x=h.state.player3_paddle_x,p.current.y=h.state.player4_paddle_y,ne.current[0]=h.state.player1_color,ne.current[1]=h.state.player2_color,ne.current[2]=h.state.player3_color,ne.current[3]=h.state.player4_color,v(h.state.player1_id),A(h.state.player2_id),y(h.state.player3_id),J(h.state.player4_id),i("started")),h.type==="go_home"&&re(),h.type==="player_lost"&&(Y.current[0]=h.state.player1_lost,Y.current[1]=h.state.player2_lost,Y.current[2]=h.state.player3_lost,Y.current[3]=h.state.player4_lost),h.type==="game_update"&&(V.current.x=h.state.ball.x,V.current.y=h.state.ball.y,N.current.y=h.state.player1_paddle_y,oe.current.x=h.state.player2_paddle_x,ce.current.y=h.state.player3_paddle_y,p.current.x=h.state.player4_paddle_x,V.current.color=h.state.ball.color),h.type==="play_sound"&&(h.collision==="wall"?P.current&&G&&P.current.play():h.collision==="paddle"&&E.current&&G&&E.current.play()),h.type==="score_update"&&(T([h.state.player1_score[0],h.state.player1_score[1]]),U([h.state.player2_score[0],h.state.player2_score[1]]),k([h.state.player3_score[0],h.state.player3_score[1]]),_([h.state.player4_score[0],h.state.player4_score[1]]),h.state.game_over&&(w(h.state.is_winner),b(!0),i("ended"),x("end"),u.close(),r.current=null))},u.onclose=()=>{},()=>{r.current&&r.current.close()}},[d]),a.useEffect(()=>{if(j||o!="started")return;const u=H.current;if(!u)return;const F=u.getContext("2d"),ee=[!1],h=g=>{(g.key==="w"||g.key==="W")&&(ee[0]=!0),(g.key==="s"||g.key==="S")&&(ee[1]=!0)},Ee=g=>{(g.key==="w"||g.key==="s"||g.key==="W"||g.key==="S")&&(ee[0]=!1,ee[1]=!1)},he=g=>{const z=V.current,Be=N.current,Le=oe.current,Oe=ce.current,We=p.current;g.fillStyle="#ffffff",g.beginPath(),g.moveTo(0,0),g.lineTo(ye,0),g.lineTo(0,ye),g.fill(),g.beginPath(),g.moveTo(u.width,0),g.lineTo(u.width-ye,0),g.lineTo(u.width,ye),g.fill(),g.beginPath(),g.moveTo(0,u.height),g.lineTo(ye,u.height),g.lineTo(0,u.height-ye),g.fill(),g.beginPath(),g.moveTo(u.width,u.height),g.lineTo(u.width-ye,u.height),g.lineTo(u.width,u.height-ye),g.fill(),g.fillStyle=z.color,g.beginPath(),g.arc(z.x,z.y,z.radius,0,2*Math.PI),g.fill(),g.closePath(),Y.current[0]||(g.fillStyle=ne.current[0],g.fillRect(Be.x,Be.y,Be.w,Be.h)),Y.current[1]||(g.fillStyle=ne.current[1],g.fillRect(Le.x,Le.y,Le.w,Le.h)),Y.current[2]||(g.fillStyle=ne.current[2],g.fillRect(Oe.x,Oe.y,Oe.w,Oe.h)),Y.current[3]||(g.fillStyle=ne.current[3],g.fillRect(We.x,We.y,We.w,We.h))},O=()=>{r.current&&r.current.readyState===WebSocket.OPEN&&ee[0]&&r.current.send(JSON.stringify({type:"keydown",direction:"up"})),r.current&&r.current.readyState===WebSocket.OPEN&&ee[1]&&r.current.send(JSON.stringify({type:"keydown",direction:"down"}))},me=()=>{j||o!=="started"||(F.clearRect(0,0,u.width,u.height),O(),he(F),requestAnimationFrame(me))};return window.addEventListener("keydown",g=>h(g)),window.addEventListener("keyup",g=>Ee(g)),me(),()=>{window.removeEventListener("keydown",g=>h(g)),window.removeEventListener("keyup",g=>Ee(g))}},[j,o]);const X=()=>{n(),i(null),b(!1),l(u=>!u)},re=()=>{s()};return e.jsxs("div",{className:lt.container,children:[M?e.jsx(qe,{layout:"horizontal",score:S[0],against:S[1],p_id:se}):e.jsx(Re,{layout:"horizontal"}),e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[M?e.jsx(qe,{score:q[0],against:q[1],p_id:M}):e.jsx(Re,{}),o==="started"||o==="ended"?e.jsxs("div",{className:"flex justify-center items-center relative min-w-[480px] min-h-[480px] max-w-[480px] max-h-[480px] w-[480px] h-[480px] bg-[var(--main-surface-tertiary)] border-[6px] border-[var(--text-color)]",style:{boxSizing:"content-box",userSelect:"none",touchAction:"manipulation"},children:[f==="game"&&e.jsx("div",{id:"gameScreen",className:lt.gameScreenDiv,children:e.jsx("canvas",{width:De,height:Te,id:lt.gameCanvas,ref:H})}),f==="end"&&e.jsx(ft,{isWinner:I,handleRetry:X,handleMainMenu:re,isMatchTournament:c})]}):e.jsx("div",{className:"relative flex items-center justify-center min-w-[480px] min-h-[480px] max-w-[480px] max-h-[480px] w-[480px] h-[480px] bg-[var(--main-surface-tertiary)] border-[6px] border-[var(--text-color)]",style:{boxSizing:"content-box",userSelect:"none",touchAction:"manipulation"},children:e.jsx("div",{className:"relative flex items-center justify-center",children:e.jsx("div",{className:"animate-pulse text-center",children:e.jsx("p",{className:"text-gray-400",children:m("game.multipleGame.WaitingPJ")})})})}),M?e.jsx(qe,{score:K[0],against:K[1],p_id:C}):e.jsx(Re,{})]}),M?e.jsx(qe,{layout:"horizontal",score:R[0],against:R[1],p_id:Z}):e.jsx(Re,{layout:"horizontal"})]})},Tt=({onClick:t,isLoading:n=!1})=>e.jsx("button",{onClick:t,disabled:n,className:`p-2 rounded-full hover:scale-125 disabled:opacity-50 ${n?"animate-spin":""}`,"aria-label":"Refresh data",children:e.jsx(ns,{className:"w-5 h-5"})}),ni=()=>{const{t}=te(),[n,s]=a.useState(null),[c,r]=a.useState(null),[o,i]=a.useState(null),[d,l]=a.useState(null),[m,f]=a.useState(null),[x,j]=a.useState(null),[b,I]=a.useState(null),w=a.useRef(null),[G,Q]=a.useState(!1),H=a.useRef(null),[q,T]=a.useState(!1),[S,U]=a.useState(null),[K,k]=a.useState(!1),[R,_]=a.useState(!1),M=a.useMemo(()=>[{id:0,title:t("game.localGame.title"),icon:Lt,description:t("game.localGame.description")},{id:1,title:t("game.remoteGame.title"),icon:es,description:t("game.remoteGame.description")},{id:2,title:t("game.remoteTournament.title"),icon:Mt,description:t("game.remoteTournament.description")},{id:3,title:t("game.localTournament.title"),icon:wt,description:t("game.localTournament.description")},{id:4,title:t("game.multipleGame.title"),icon:wt,description:t("game.multipleGame.description")}],[t]),{gameAccepted:v,gameInvite:se,setGameAccepted:A,player1_id:C,player2_id:y}=Wn(),{user:Z}=Rt(),J=O=>{switch(O){case"waiting":return t("game.joinedTournaments.statusGame.waiting");case"ongoing":return t("game.joinedTournaments.statusGame.ongoing");case"ended":return t("game.joinedTournaments.statusGame.ended");case"aborted":return t("game.joinedTournaments.statusGame.aborted");default:return t("game.joinedTournaments.statusGame.unknown")}},ne=()=>{Q(!1)},Y=O=>{u({event:"request_tournament",tournament_name:O})},P=()=>{oe(),re()},{data:E,isLoading:V,error:N,refetch:oe}=Ce("matchmaker/tournaments/user-tournaments"),{data:ce,isLoading:p,error:X,refetch:re}=Ce("matchmaker/tournaments");a.useEffect(()=>{const O=`${ut("matchmaking/")}`,me=new WebSocket(O);return w.current=me,me.onopen=()=>{},me.onmessage=g=>{P();const z=JSON.parse(g.data);console.log(z),z.event==="error"&&Me.error(z.message),z.event==="success"&&Me.success(z.message),z.event==="match_start"&&(I(z.match_address),f(z.player1_id),j(z.player2_id),T(!0)),z.event==="game_address"&&(l(z.game_address),f(z.player1_id),j(z.player2_id),console.log("setting game address.."),i("startGame")),z.event==="multigame_address"&&(l(z.game_address),i("startMultiGame")),z.event==="tournament_update"&&U(z.tournament_stat),z.event==="opponent_ready"&&_(!0),z.event==="opponent_unready"&&_(!1)},me.onclose=()=>{},()=>{w.current&&(u({event:"remove_from_queue"}),i(null),w.current.close()),A(!1)}},[]);const u=O=>{var me;((me=w.current)==null?void 0:me.readyState)===WebSocket.OPEN&&w.current.send(JSON.stringify(O))},F=()=>{i("inqueue"),u({event:"request_remote_game"})},ee=()=>{u({event:"request_multiple_game"})},h=()=>{Q(!0)},Ee=O=>{u({event:"join_tournament",tournament_id:O})},he=()=>{i(null),r(null),k(!1)};return c===0?e.jsx(vc,{onReturn:he}):(c===1&&(F(),r(null)),c===2&&(h(),r(null)),c===3?e.jsx(Cl,{onReturn:he}):(c===4&&(ee(),r(null)),v&&se?e.jsx(it,{onReturn:()=>{A(!1),he()},requestRemoteGame:()=>{A(!1),F()},game_address:se,p1_id:C,p2_id:y},se):o==="startMultiGame"&&d?e.jsx(Gl,{requestMultipleGame:ee,game_address:d,onReturn:he}):o==="startGame"&&d?e.jsx(it,{onReturn:he,requestRemoteGame:F,game_address:d,p1_id:m,p2_id:x},d):K?e.jsx(po,{matchAddress:b,matchStarted:q,setMatchStarted:T,tournamentStat:S,user:Z.username,sendMessage:u,onReturn:he,opponentReady:R,setOpponentReady:_,p1_id:m,p2_id:x},H.current):e.jsxs("div",{className:L.container,children:[o==="inqueue"&&!(v&&se)&&e.jsx("div",{className:L.modalOverlay,children:e.jsx($l,{onClick:()=>{u({event:"remove_from_queue"}),i(null)}})}),e.jsxs("div",{className:L.topContainer,children:[e.jsxs("div",{className:L.left,children:[M.map(O=>e.jsx(Ze,{className:`${L.item} ${L.cardMode} ${n===O.id?L.cardHoveredMode:""}`,onMouseEnter:()=>s(O.id),onMouseLeave:()=>s(null),onClick:()=>r(O.id),children:e.jsxs(Xe,{className:L.cardContentMode,children:[e.jsx(O.icon,{className:L.iconMode}),e.jsx(Qe,{className:L.titleMode,children:O.title}),e.jsx("p",{className:L.descriptionMode,children:O.description}),e.jsx(Zn,{className:`${L.arrowIconMode} ${n===O.id?L.arrowIconHoveredMode:""}`})]})},O.id)),e.jsx(jo,{isOpen:G,onClose:ne,onSubmit:Y})]}),e.jsx("div",{className:L.right,children:e.jsxs(Ze,{className:L.card,children:[e.jsx(jt,{children:e.jsxs(Qe,{className:L.title,children:[e.jsx("p",{children:t("game.joinedTournaments.title")}),e.jsx(Tt,{onClick:()=>oe(),isLoading:V})]})}),e.jsxs(Xe,{className:L.content,children:[E==null?void 0:E.map(O=>e.jsxs("div",{className:L.tournamentItem,onClick:()=>{U(O.state),k(!0)},children:[e.jsxs("div",{children:[e.jsx("h3",{className:L.tournamentName,children:O.name}),e.jsxs("p",{className:L.tournamentPlayerCount,children:[t("game.joinedTournaments.players")," ",O.players.length]})]}),e.jsxs("div",{className:L.rightAligned,children:[e.jsxs("p",{className:L.tournamentStatus,children:[t("game.joinedTournaments.status")," ",J(O.status)]}),e.jsxs("p",{className:L.tournamentDate,children:[t("game.joinedTournaments.started")," ",pt(O.created_at,t("lang"))]})]})]},O.id)),!N&&!V&&!(E!=null&&E.length)&&e.jsxs("div",{className:L.noTournaments,children:[e.jsx(It,{size:58}),e.jsx("p",{children:t("game.joinedTournaments.noTournament")})]}),N&&e.jsx("div",{className:L.errorWrapper,children:e.jsx(Wt,{})}),!N&&V&&e.jsx("div",{className:L.loaderWrapper,children:e.jsx(Ot,{})})]})]})})]}),e.jsx("div",{className:L.bottomContainer,children:e.jsxs(Ze,{className:L.bottomCard,children:[e.jsx(jt,{children:e.jsxs(Qe,{className:L.title,children:[e.jsx("p",{children:t("game.openTournaments.title")}),e.jsx(Tt,{onClick:()=>re(),isLoading:p})]})}),e.jsx(Xe,{className:L.bottomCardContent,children:e.jsx(Mr,{handleJoin:Ee,tournaments:ce,error:X,isLoading:p})})]})})]})))};export{ni as default};
